{
  "env": {
    "es6": true,
    "node": true
  },
  "root": true,
  "ignorePatterns": [
    "**/*"
  ],
  "plugins": [
    "@nrwl/nx",
    "import",
    "jsonc",
    "no-unsanitized",
    "radar",
    "security",
    "simple-import-sort",
    "sort-keys-fix",
    "unicorn",
    "spellcheck"
  ],
  "overrides": [
    {
      "files": [
        "*.ts",
        "*.tsx",
        "*js"
      ],
      "extends": [
        "plugin:@nrwl/nx/typescript",
        "plugin:@typescript-eslint/recommended",
        "plugin:jsonc/recommended-with-jsonc",
        "plugin:radar/recommended",
        "plugin:security/recommended",
        "plugin:unicorn/recommended",
        "plugin:prettier/recommended"
      ],
      "rules": {
        "unicorn/switch-case-braces": "off",
        "spellcheck/spell-checker": [
          "warn",
          {
            "lang": "en_US",
            "comments": true,
            "strings": true,
            "minLength": 3,
            "identifiers": true,
            "skipIfMatch": [
              // Anything with a number is fine
              "[0-9]"
            ],
            "skipWords": [
              "abb",
              "abortable",
              "activations",
              "aes",
              "aggregator",
              "alloc",
              "allowlist",
              "ansi",
              "argv",
              "arn",
              "ascii",
              "asciichart",
              "autogenerated",
              "automations",
              "aws",
              "bashrc",
              "namespace",
              "bcc",
              "bg",
              "bitrate",
              "bson",
              "cachable",
              "mdi",
              "calc",
              "cancelled",
              "cbc",
              "changelog",
              "changeme",
              "charset",
              "checkbox",
              "chrono",
              "cipheriv",
              "closable",
              "cmp",
              "colorloop",
              "configurator",
              "cors",
              "crashy",
              "crl",
              "crlf",
              "cron",
              "csurf",
              "csv",
              "ctor",
              "customizations",
              "datetime",
              "dayjs",
              "debounce",
              "decipheriv",
              "decrement",
              "decrypt",
              "decrypted",
              "derp",
              "dimmable",
              "discoverable",
              "dockerfile",
              "dow",
              "downloader",
              "dropdown",
              "dto",
              "eb",
              "ellipsize",
              "entrypoint",
              "enum",
              "enumarray",
              "enums",
              "errored",
              "eventemitter",
              "execa",
              "fallthrough",
              "favicon",
              "figlet",
              "formatter",
              "friday",
              "fs",
              "gi",
              "globals",
              "gotify",
              "gte",
              "gunzip",
              "gzip",
              "hass",
              "hass",
              "homeassistant",
              "homedir",
              "href",
              "href",
              "hs",
              "hvac",
              "icloud",
              "imgur",
              "ini",
              "integrations",
              "javascript",
              "jpg",
              "jsx",
              "keybind",
              "keymap",
              "keymaps",
              "keyof",
              "keypress",
              "keypresses",
              "kunami",
              "kwh",
              "lang",
              "lightbulb",
              "localhost",
              "lookups",
              "lovelace",
              "lstat",
              "lt",
              "lte",
              "lutron",
              "matcher",
              "matchers",
              "metatype",
              "migrator",
              "minimap",
              "minimist",
              "minreds",
              "monaco",
              "mongod",
              "mongodb",
              "mqtt",
              "msg",
              "multiline",
              "nano",
              "nestjs",
              "nin",
              "nodejs",
              "nowrap",
              "npx",
              "nrwl",
              "nunjucks",
              "nx",
              "oneline",
              "oof",
              "os",
              "pagedown",
              "pageup",
              "pagga",
              "paginator",
              "parsable",
              "passthrough",
              "pathname",
              "pdf",
              "pico",
              "pid",
              "pino",
              "popconfirm",
              "preconfigured",
              "preformatted",
              "prepend",
              "prettifiers",
              "qos",
              "rawlist",
              "rc",
              "readdir",
              "readonly",
              "recurse",
              "redis",
              "referenceable",
              "reflog",
              "reflogs",
              "repl",
              "repo",
              "req",
              "rgb",
              "schemas",
              "scrypt",
              "sdk",
              "selectable",
              "semver",
              "serializers",
              "sider",
              "ssl",
              "stderr",
              "stdin",
              "stdout",
              "steggy",
              "strikethrough",
              "stringified",
              "sudoku",
              "templating",
              "timestamps",
              "tooltip",
              "tput",
              "transpile",
              "transpiles",
              "trebel",
              "tsconfig",
              "tsdoc",
              "ttl",
              "tty",
              "typeof",
              "typings",
              "un",
              "undelete",
              "unlisten",
              "unmount",
              "unmute",
              "unserialize",
              "unsortable",
              "upserted",
              "uptime",
              "uri",
              "urls",
              "usr",
              "utf",
              "vin",
              "vm",
              "vmservice",
              "wasm",
              "wat",
              "webhook",
              "webhooks",
              "webpack",
              "wildcard",
              "workspace",
              "ws",
              "wss",
              "xy",
              "yaml",
              "yml",
              "yolo",
              "zshrc"
            ]
          }
        ],
        "@typescript-eslint/require-await": "warn",
        "security/detect-non-literal-regexp": "off",
        "unicorn/prefer-module": "off",
        "@typescript-eslint/no-magic-numbers": "warn",
        "@typescript-eslint/prefer-includes": "warn",
        "@typescript-eslint/no-throw-literal": "error",
        "unicorn/no-object-as-default-parameter": "off",
        "require-await": "off",
        "unicorn/no-null": "off",
        "unicorn/no-empty-file": "off",
        "unicorn/no-array-callback-reference": "off",
        "unicorn/no-await-expression-member": "off",
        "unicorn/no-useless-undefined": "off",
        "@typescript-eslint/require-array-sort-compare": "error",
        "@typescript-eslint/unbound-method": "error",
        "import/no-extraneous-dependencies": [
          "error",
          {
            "packageDir": "./"
          }
        ],
        "@typescript-eslint/member-ordering": [
          1,
          {
            "default": {
              "order": "alphabetically",
              "memberTypes": [
                // General rule:
                // static > constructor > instance
                // public > "public" > protected > private
                // static fields
                "public-static-field",
                "static-field",
                "protected-static-field",
                "private-static-field",
                // static methods
                "public-static-method",
                "static-method",
                "protected-static-method",
                "private-static-method",
                // constructors
                "public-constructor",
                "constructor",
                "protected-constructor",
                "private-constructor",
                "signature",
                // public field
                "public-abstract-field",
                "public-instance-field",
                "public-field",
                // "public" field
                "abstract-field",
                "instance-field",
                "field",
                // protected field
                "protected-abstract-field",
                "protected-instance-field",
                "protected-field",
                // private field
                // "private-abstract-field",
                "private-instance-field",
                "private-field",
                // public method
                "public-abstract-method",
                "public-instance-method",
                "public-method",
                // "public" method
                "abstract-method",
                "instance-method",
                "method",
                // protected method
                "protected-abstract-method",
                "protected-instance-method",
                "protected-method",
                // private method
                // "private-abstract-method",
                "private-instance-method",
                "private-method"
              ]
            }
          }
        ],
        "radar/prefer-immediate-return": "off",
        "@nrwl/nx/enforce-module-boundaries": [
          "error",
          {
            "enforceBuildableLibDependency": true,
            "allow": [],
            "depConstraints": [
              {
                "sourceTag": "frontend",
                "onlyDependOnLibsWithTags": [
                  "shared"
                ],
                "bannedExternalImports": [
                  "@nestjs/*"
                ]
              },
              {
                "sourceTag": "backend",
                "onlyDependOnLibsWithTags": [
                  "nestjs",
                  "shared"
                ],
                "bannedExternalImports": []
              },
              {
                "sourceTag": "terminal",
                "onlyDependOnLibsWithTags": [
                  "nestjs",
                  "shared",
                  "tty"
                ],
                "bannedExternalImports": []
              },
              {
                "sourceTag": "shared",
                "onlyDependOnLibsWithTags": [
                  "shared"
                ],
                "bannedExternalImports": []
              },
              {
                "sourceTag": "nestjs",
                "onlyDependOnLibsWithTags": [
                  "nestjs",
                  "shared"
                ],
                "bannedExternalImports": []
              },
              {
                "sourceTag": "tty",
                "onlyDependOnLibsWithTags": [
                  "nestjs",
                  "shared",
                  "tty"
                ]
              },
              {
                "sourceTag": "standalone",
                "onlyDependOnLibsWithTags": [
                  "shared"
                ],
                "bannedExternalImports": [
                  "@nestjs/*"
                ]
              },
              {
                "sourceTag": "*",
                "bannedExternalImports": [
                  // dayjs is preferred
                  // moment is needed for corner cases
                  "moment"
                ]
              }
            ]
          }
        ],
        "unicorn/prevent-abbreviations": [
          "error",
          {
            "replacements": {
              "temp": false,
              "i": false,
              "ref": false,
              "e": false,
              "props": false,
              "docs": false
            }
          }
        ],
        "no-case-declarations": "off",
        "no-async-promise-executor": "off",
        "unicorn/prefer-node-protocol": "off",
        "unicorn/no-array-for-each": "off",
        "unicorn/import-style": "off",
        "security/detect-possible-timing-attacks": "off",
        "security/detect-object-injection": "off",
        "security/detect-non-literal-fs-filename": "off",
        "sort-keys-fix/sort-keys-fix": "warn",
        "simple-import-sort/imports": "warn",
        "simple-import-sort/exports": "warn",
        "no-console": [
          "error"
        ],
        "@typescript-eslint/no-unnecessary-type-constraint": "off",
        "@typescript-eslint/no-unused-vars": [
          "warn",
          {
            "varsIgnorePattern": "logger"
          }
        ],
        "@typescript-eslint/no-explicit-any": "error"
      }
    },
    {
      "files": [
        "*.spec.ts"
      ],
      "rules": {
        "@typescript-eslint/unbound-method": "off",
        "@typescript-eslint/no-magic-numbers": "off",
        "radar/no-duplicate-string": "off"
      }
    },
    {
      "files": [
        "*.controller.ts"
      ],
      "rules": {
        // 🤕
        "radar/no-duplicate-string": "off",
        // route order matters, not method name
        "@typescript-eslint/member-ordering": "off"
      }
    },
    {
      "files": [
        "*.decorator.ts"
      ],
      "rules": {
        // Incorrectly firing for exported maps and stuff
        "radar/no-unused-collection": "off",
        "@typescript-eslint/ban-types": "off"
      }
    },
    {
      "files": [
        "*persistence.service.ts"
      ],
      "rules": {
        "unicorn/no-array-callback-reference": "off"
      }
    },
    {
      "files": [
        "*module.ts"
      ],
      "rules": {
        "radar/no-duplicate-string": "off",
        "unicorn/no-useless-spread": "off"
      }
    }
  ]
}
