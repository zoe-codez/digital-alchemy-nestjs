(()=>{var e={8867:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FORCE_APP_PATH=t.LIB_BOILERPLATE=t.CACHE_TTL=t.REDIS_PORT=t.REDIS_HOST=t.CACHE_PROVIDER=t.CONFIG=t.SCAN_CONFIG=t.LOG_LEVEL=void 0,t.LOG_LEVEL="LOG_LEVEL",t.SCAN_CONFIG="SCAN_CONFIG",t.CONFIG="CONFIG",t.CACHE_PROVIDER="CACHE_PROVIDER",t.REDIS_HOST="REDIS_HOST",t.REDIS_PORT="REDIS_PORT",t.CACHE_TTL="CACHE_TTL",t.LIB_BOILERPLATE=Symbol("boilerplate"),t.FORCE_APP_PATH=Symbol("FORCE_APP_PATH")},7720:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractConfig=t.ConfigTypeDTO=t.ConfigDefinitionDTO=t.StringArrayConfig=t.RecordConfig=t.NumberConfig=t.InternalConfig=t.BooleanConfig=t.StringConfig=t.BaseConfig=void 0;class BaseConfig{description;required;type}t.BaseConfig=BaseConfig,t.StringConfig=class StringConfig extends BaseConfig{static isConfig(e){return"string"===e.type}enum;flags},t.BooleanConfig=class BooleanConfig extends BaseConfig{static isConfig(e){return"boolean"===e.type}},t.InternalConfig=class InternalConfig extends BaseConfig{static isConfig(e){return"internal"===e.type}},t.NumberConfig=class NumberConfig extends BaseConfig{static isConfig(e){return"number"===e.type}},t.RecordConfig=class RecordConfig extends BaseConfig{static isConfig(e){return"record"===e.type}},t.StringArrayConfig=class StringArrayConfig extends BaseConfig{static isConfig(e){return"string[]"===e.type}},t.ConfigDefinitionDTO=class ConfigDefinitionDTO{application;bootstrapOverrides;config},t.ConfigTypeDTO=class ConfigTypeDTO{library;metadata;property},t.AbstractConfig=class AbstractConfig{application;libs;config;configs}},8419:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ACTIVE_APPLICATION=t.CONFIG_DEFAULTS=t.CONSUMES_CONFIG=t.SKIP_CONFIG_INIT=t.BOOTSTRAP_OPTIONS=t.DESCRIPTOR=t.MISSING_CONTEXT=t.WARNING_LOG=t.DEBUG_LOG=t.TRACE_LOG=t.LOG_CONTEXT=t.LOGGER_LIBRARY=void 0,t.LOGGER_LIBRARY=Symbol("LOGGER_LIBRARY"),t.LOG_CONTEXT=Symbol("LOG_CONTEXT"),t.TRACE_LOG=Symbol("TRACE_LOG"),t.DEBUG_LOG=Symbol("DEBUG_LOG"),t.WARNING_LOG=Symbol("WARNING_LOG"),t.MISSING_CONTEXT="MISSING CONTEXT",t.DESCRIPTOR=Symbol("DESCRIPTOR"),t.BOOTSTRAP_OPTIONS=Symbol("BOOTSTRAP_OPTIONS"),t.SKIP_CONFIG_INIT=Symbol("SKIP_CONFIG_INIT"),t.CONSUMES_CONFIG=Symbol("CONSUMES_CONFIG"),t.CONFIG_DEFAULTS=Symbol("CONFIG_DEFAULTS"),t.ACTIVE_APPLICATION=Symbol("ACTIVE_APPLICATION")},7478:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=r(752);o.__exportStar(r(7720),t),o.__exportStar(r(8419),t),o.__exportStar(r(7037),t),o.__exportStar(r(9569),t)},7037:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},9569:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},634:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ApplicationModule=t.NO_APPLICATION=void 0;const o=r(752),i=r(761),n=o.__importDefault(r(5502)),s=r(7282),a=r(7478),c=r(2428),l=r(9369),_=r(2310),p=r(2475);t.NO_APPLICATION=Symbol("steggy_no_app"),t.ApplicationModule=function(e){e.application??=t.NO_APPLICATION,e.imports??=[],e.providers??=[],e.globals??=[],e.controllers??=[],[...e.providers,...e.controllers].forEach((t=>{t[a.LOGGER_LIBRARY]=e.application.description}));const r=[{provide:a.ACTIVE_APPLICATION,useValue:e.application},{provide:n.default,useValue:new n.default},...e.globals];return e.imports=[l.BoilerplateModule.forRoot(),{exports:r,global:!0,module:class{},providers:r,type:"GLOBAL_SYMBOLS"},(0,c.RegisterCache)(),...e.imports],p.LibraryModule.configs.set(e.application.description,{configuration:e.configuration??{}}),t=>(t[a.LOGGER_LIBRARY]=e.application.description,function(e,t,r){const o=p.LibraryModule.configs.get(t);e.forEach((e=>{const t=e[a.CONSUMES_CONFIG];t&&t.forEach((([e,t])=>{if(t){const o=p.LibraryModule.configs.get(t.description);i.is.undefined(o.configuration[e])&&(console.error(`[${r}] Cannot @InjectConfig ${e} of module ${t.description}. Metadata not provided for property`),(0,s.exit)())}else o.configuration[e]??=_.MESSY_INJECTED_CONFIGS.get(e)??{description:"No description provided",type:"string"}}))}))}([...e.providers,...e.controllers],e.application.description,t.name),Object.keys(e).forEach((r=>{Reflect.defineMetadata(r,e[r],t)})),t)}},9692:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CastResult=void 0;const o=r(136);t.CastResult=function(e,{record:t}={}){return function(r,i,n){const s=n.value;return n.value=async function(...r){const i=await Reflect.apply(s,this,r);return i?t?Object.fromEntries(Object.entries(i).map((([t,r])=>[t,(0,o.plainToInstance)(e,r)]))):Array.isArray(i)?i.map((t=>(t._id&&(t._id=t._id.toString()),(0,o.plainToInstance)(e,t)))):(i._id&&(i._id=i._id.toString()),(0,o.plainToInstance)(e,i)):i},n}}},7710:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Cron=t.CronObject=void 0;const o=r(6481),i=r(761);var n;!function(e){e[e.second=0]="second",e[e.minute=1]="minute",e[e.hour=2]="hour",e[e.dayOfMonth=3]="dayOfMonth",e[e.month=4]="month",e[e.dayOfWeek=5]="dayOfWeek"}(n=t.CronObject||(t.CronObject={})),t.Cron=function(e){return(0,o.SetMetadata)(i.CRON_SCHEDULE,i.is.string(e)?e:Object.keys(n).map((t=>e[t]??"*")).join(" "))}},4208:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OnEventMetadata=t.OnEvent=t.EVENT_LISTENER_METADATA=void 0,t.EVENT_LISTENER_METADATA="EVENT_LISTENER_METADATA",t.OnEvent=function(...e){return function(r,o,i){const n=Reflect.getMetadata(t.EVENT_LISTENER_METADATA,i.value)||{event:[]};return Reflect.defineMetadata(t.EVENT_LISTENER_METADATA,{event:[...n.event,...e]},i.value),i}},t.OnEventMetadata=class OnEventMetadata{event}},8933:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=r(752);o.__exportStar(r(634),t),o.__exportStar(r(9692),t),o.__exportStar(r(7710),t),o.__exportStar(r(4208),t),o.__exportStar(r(2310),t),o.__exportStar(r(7816),t),o.__exportStar(r(2475),t),o.__exportStar(r(6390),t)},2310:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InjectConfig=t.MESSY_INJECTED_CONFIGS=t.CONFIG_PROVIDERS=void 0;const o=r(6481),i=r(761),n=r(5828),s=r(7478),a=r(2246);function c(e,r){return function(c,l,_){i.is.object(r)&&(t.MESSY_INJECTED_CONFIGS.set(e,r),r=void 0),c[s.CONSUMES_CONFIG]??=[],c[s.CONSUMES_CONFIG].push([e,r]);const p=(0,n.v4)();return t.CONFIG_PROVIDERS.add({inject:[a.AutoConfigService,s.ACTIVE_APPLICATION],provide:p,useFactory(t,o){const i=[],n=r?r.description:c[s.LOGGER_LIBRARY];return n&&n!==o.description?i.push("libs",n):i.push("application"),i.push(e),t.get(i.join("."))}}),(0,o.Inject)(p)(c,l,_)}}t.CONFIG_PROVIDERS=new Set,t.MESSY_INJECTED_CONFIGS=new Map,t.InjectConfig=c,c.inject=function(e,r){const o=(0,n.v4)();return t.CONFIG_PROVIDERS.add({inject:[a.AutoConfigService,s.ACTIVE_APPLICATION],provide:o,useFactory(t){const o=[];return r?o.push("libs",r.description):o.push("application"),o.push(e),t.get(o.join("."))}}),o}},7816:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TransientLogger=t.InjectLogger=t.mappedContexts=t.LOGGER_PROVIDERS=void 0;const o=r(6481),i=r(5828),n=r(6829);function s(){const e=(0,i.v4)();return t.LOGGER_PROVIDERS.add({inject:[n.AutoLogService],provide:e,useFactory:t=>(t.contextId=e,t)}),function(r,i,n){return t.mappedContexts.set(e,r.name),(0,o.Inject)(e)(r,i,n)}}t.LOGGER_PROVIDERS=new Set,t.mappedContexts=new Map,t.InjectLogger=s,t.TransientLogger=s},2475:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LibraryModule=void 0;const o=r(6481),i=r(7478);function n(e){const t=Object.keys(e),r=e.library.description;return n.configs.set(r,{configuration:e.configuration}),n=>{n[i.LOGGER_LIBRARY]=r,e.providers??=[],e.providers.forEach((e=>{e[i.LOGGER_LIBRARY]=r})),e.global&&(0,o.Global)()(n),delete e.global,t.forEach((t=>{Reflect.defineMetadata(t,e[t],n)}))}}t.LibraryModule=n,n.configs=new Map},6390:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.QuickScript=void 0;const o=r(6481),i=r(761),n=r(7282),s=r(2428),a=r(634),c=r(2475);t.QuickScript=function({WAIT_TIME:e=10*i.DEFAULT_LIMIT,bootstrap:t,controller:r,PERSISTENT:l,..._}={}){return _.imports??=[],_.providers??=[],_.controllers??=[],_.application??=Symbol("steggy-quick-script"),c.LibraryModule.configs.set(_.application.description,{configuration:_.configuration??{}}),function(c){return setTimeout((()=>{var r;(0,s.Bootstrap)((r=_,(0,a.ApplicationModule)(r)(class{})),{nestNoopLogger:!0,postInit:[t=>setTimeout((async()=>{const e=t.get(c);i.is.function(e.exec)&&(await e.exec(),l||(await t.close(),(0,n.exit)()))}),e)],prettyLog:!0,...t})}),10),_.providers.push(c),t?.http&&i.is.string(r)?(_.controllers.push(c),(0,o.Controller)(r)(c)):(0,o.Injectable)()(c)}}},9793:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Bootstrap=void 0;const o=r(752),i=r(143),n=r(6188),s=r(2592),a=r(761),c=o.__importDefault(r(5022)),l=o.__importDefault(r(6860)),_=r(7282);t.Bootstrap=async function(e,t){const r=Reflect.getMetadata("imports",e)??[];a.is.empty(t.imports)||(r.push(...t.imports),Reflect.defineMetadata("imports",r,e));const o=r.find((e=>"GLOBAL_SYMBOLS"===e.type));o||(console.log("Bootstrap requires modules be annotated with @ApplicationModule"),(0,_.exit)()),t.flags??=[],t.globals??=[],t.globals.push({provide:s.BOOTSTRAP_OPTIONS,useFactory:()=>t});const p=[...t.globals,...t.flags.map((e=>({provide:e,useValue:!0})))];p.push({provide:s.CONFIG_DEFAULTS,useValue:t.config??{}}),o.exports.push(...p),o.providers.push(...p);let{preInit:u,postInit:d}=t;const{prettyLog:f,nestNoopLogger:g,http:E,init:A}=t;let h;f&&c.default.supportsColor&&(0,s.UsePrettyLogger)();const O={logger:g?s.NEST_NOOP_LOGGER:s.AutoLogService.nestLogger};let S;try{E?(h=(0,l.default)(),S=await i.NestFactory.create(e,new n.ExpressAdapter(h),{...O,cors:!0})):S=await i.NestFactory.create(e,O)}catch(e){console.error(e)}if(!1===A)return S;S.enableShutdownHooks();const v=S.get(s.LifecycleService);return(await S.resolve(s.AutoLogService)).setContext(s.LIB_BOILERPLATE,{name:"Bootstrap"}),u??=[],await(0,a.eachSeries)(u,(async e=>{await e(S,h,t)})),await v.preInit(S,{options:t,server:h}),await S.init(),d??=[],await(0,a.eachSeries)(d,(async e=>{await e(S,h,t)})),await v.postInit(S,{options:t,server:h}),S}},4681:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InjectCache=t.CacheManagerService=t.RegisterCache=void 0;const o=r(6481),i=r(6829);t.RegisterCache=function(){return o.CacheModule.registerAsync({inject:[i.CacheProviderService],useFactory:e=>e.getConfig()})},t.CacheManagerService=void 0,t.InjectCache=function(){return(0,o.Inject)(o.CACHE_MANAGER)}},2119:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ScanConfig=void 0;const o=r(7478),i=r(8419),n=r(8933),s=r(6829);t.ScanConfig=function(e,t){const r=e.get(s.ModuleScannerService),a=new Set,c=r.findWithSymbol(i.CONSUMES_CONFIG),l=[],{configs:_}=n.LibraryModule;return c.forEach(((e,t)=>{const r=t.constructor[i.LOGGER_LIBRARY]||"application";e.forEach((([e,t])=>{const o=t?t.description:r,i=[o,e].join(".");if(a.has(i))return;a.add(i);const{configuration:s}=_.get(o),c=s[e]??n.MESSY_INJECTED_CONFIGS.get(e);l.push({library:t?t.description:r,metadata:c,property:e})}))})),{application:e.get(o.ACTIVE_APPLICATION).description,bootstrapOverrides:t??e.get(i.CONFIG_DEFAULTS),config:l}}},2428:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=r(752);o.__exportStar(r(9793),t),o.__exportStar(r(4681),t),o.__exportStar(r(2119),t),o.__exportStar(r(4921),t)},4921:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UsePrettyLogger=t.PrettyNestLogger=t.prettyFormatMessage=t.methodColors=t.highlightContext=void 0;const o=r(752);r(3009);const i=r(761),n=o.__importDefault(r(5022)),s=o.__importDefault(r(8545)),a=r(7282),c=r(2636),l=(0,s.default)({level:c.AutoLogService.logger.level,transport:{options:{colorize:!0,crlf:!1,customPrettifiers:{},errorLikeObjectKeys:["err","error"],errorProps:"",hideObject:!1,ignore:"pid,hostname",levelKey:"",messageKey:"msg",singleLine:!0,timestampKey:"time",translateTime:"SYS:ddd hh:MM:ss.l"},target:"pino-pretty"}},s.default.destination({sync:!0}));t.highlightContext=(e,t)=>n.default`{bold.${t.slice(2).toLowerCase()} [${e}]}`,t.methodColors=new Map([["trace","bgGrey"],["debug","bgBlue.dim"],["warn","bgYellow.dim"],["error","bgRed"],["info","bgGreen"],["fatal","bgMagenta"]]),t.prettyFormatMessage=e=>e?(e=e.replace(new RegExp("([^ ]+#[^ ]+)","g"),(e=>n.default.yellow(e))).replaceAll("] > [",n.default`] {blue >} [`).replace(new RegExp("(\\[[^\\]\\[]+\\])","g"),(e=>n.default.bold.magenta(e.slice(1,-1)))).replace(new RegExp("(\\{[^\\]}]+\\})","g"),(e=>n.default.bold.gray(e.slice(1,-1))))," - "===e.slice(0," - ".length)&&(e=`${n.default.yellowBright` - `}${e.slice(" - ".length)}`),e):"",t.PrettyNestLogger={debug:(e,r)=>{"@nestjs:InstanceLoader"==(r=`@nestjs:${r}`)&&(e=(0,t.prettyFormatMessage)(e.split(" ").map(((e,t)=>0===t?`[${e}]`:e)).join(" "))),l.debug(`${(0,t.highlightContext)(r,"bgMagenta")} ${e}`)},error:(e,r)=>{(r=`@nestjs:${r}`).length>20&&(e=(e=>{if(!e)return"";const t=e.split("\n"),r="dependencies of the ";if(t[0].includes(r)){let[o,i]=t[0].split(".");o=o.slice(o.indexOf(r)+r.length);const s=o.slice(0,o.indexOf(" "));o=o.slice(o.indexOf(" ")+1);const c=o.slice(1,-1).split(",").map((e=>e.trim())),l=i.match(new RegExp("in the ([^ ]+) context")),[,_]=i.match(new RegExp("the argument ([^ ]+) at")),p=n.default.red.bold(_),u=n.default.yellow("import"),d=n.default.yellow("from"),f=n.default.blueBright("{"),g=n.default.blueBright("}");let E=!1;const A=e.split("\n\n")[2],h=c.map((e=>!1===E?"?"===e?(E=!0,p):n.default.greenBright.bold(e):n.default.bold.yellow(e)));e=["",n.default.white.bold`Nest cannot resolve the dependencies of {bold.underline.magenta ${l[1]}}:{cyanBright.underline ${s}}`,"",n.default.magenta`@Injectable()`,`${n.default.yellow("export class")} ${s} ${f}`,n.default.gray`  ...`,`  ${n.default.yellow("constructor")} ${n.default.blueBright("(")}`,...h.map((e=>`    ${e},`)),n.default.blueBright(" ) {}"),n.default.gray` ...`,g,"",n.default.white.bold`Potential solutions:`,n.default.whiteBright` - If ${p} is a provider, is it part of the current {bold.magenta ${l[1]}}?`,n.default.whiteBright` - If ${p} is exported from a separate {bold.magenta @Module}, is that module imported within {bold.magenta ${l[1]}}?`,`${n.default.magenta("@Module")} ${n.default.blueBright("({")} `,`  ${n.default.white("imports")}: [ `,n.default.gray`    /* the {magenta.bold Module} containing ${p} */`,"  ] ",n.default.blueBright("})"),n.default.whiteBright` - Circular references`,n.default.gray` ...`,`  ${n.default.yellow("constructor")} ${n.default.blueBright("(")}`,...h.map((e=>e===p?`${n.default.magenta("@Inject")}${n.default.blueBright("(")}${n.default.yellow("forwardRef")}${n.default.blueBright("(()")} => ${p}${n.default.blueBright("))")} ${e}`:e)).map((e=>`    ${e},`)),n.default.blueBright(" ) {}"),n.default.gray` ...`,n.default.whiteBright` - Verify import statement follows these standards`,n.default.gray`// Good imports ðŸ‘`,...['"@another/library"','"./file"','"../directory"'].map((e=>`${u} ${f} ${p} ${g} ${d} ${n.default.green(e)};`)),n.default.gray`// Breaking imports ðŸ‘Ž`,...['"."','".."','"../.."'].map((e=>`${u} ${f} ${p} ${g} ${d} ${n.default.red(e)};`)),n.default.gray`// Oops import ðŸ¤”`,`${n.default.yellow("import type")} ${f} ${p} ${g} ${n.default.yellow("from")} ....`,"","",n.default.white.bold`Stack Trace`,A.replaceAll((0,a.cwd)(),n.default.underline`workspace`)].join("\n")}return e})(r),r="@steggy:BootErrorMessage"),l.error(`${(0,t.highlightContext)(r,"bgRed")} ${e??"ERROR MESSAGE NOT PROVIDED"}`)},log:(e,r)=>{let o="debug",i="bgGreen";if("@nestjs:InstanceLoader"==(r=`@nestjs:${r}`)&&(e=(0,t.prettyFormatMessage)(e.split(" ").map(((e,t)=>0===t?`[${e}]`:e)).join(" "))),"@nestjs:RoutesResolver"===r){const r=e.split(" ");e=(0,t.prettyFormatMessage)([`[${r[0]}]`,r[1]].join(" ").slice(0,-1))}if("@nestjs:NestApplication"===r&&e.includes("started")&&(e=`ðŸ£ ${e} ðŸ£`),"@nestjs:RouterExplorer"===r){const[r]=e.match(new RegExp("(\\{[^\\]]+\\})")),[n,s]=r.slice(1,-1).split(", ");e=(0,t.prettyFormatMessage)(` - [${s}] {${n}}`),o="debug",i="bgBlue.dim"}l[o](`${(0,t.highlightContext)(r,i)} ${e}`)},verbose:(e,r)=>{t.PrettyNestLogger.debug(e,r)},warn:(e,r)=>{l.warn(`${(0,t.highlightContext)(`@nestjs:${r}`,"bgYellow.dim")} ${e}`)}},t.UsePrettyLogger=function(){c.AutoLogService.logger=l,c.AutoLogService.prettyLogger=!0,c.AutoLogService.nestLogger=t.PrettyNestLogger,c.AutoLogService.logger=l,c.AutoLogService.call=function(e,r,...o){if("trace"===e&&"trace"!==c.AutoLogService.logger.level)return;const n=c.AutoLogService.getLogger();i.is.object(o[0])?n[e](o.shift(),`${(0,t.highlightContext)(r,t.methodColors.get(e))} ${(0,t.prettyFormatMessage)(o.shift())}`,...o):n[e](`${(0,t.highlightContext)(r,t.methodColors.get(e))} ${(0,t.prettyFormatMessage)(o.shift())}`,...o)}}},2592:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=r(752);r(3236),r(1964);const i=o.__importDefault(r(1635)),n=o.__importDefault(r(5334)),s=o.__importDefault(r(9912));o.__exportStar(r(8867),t),o.__exportStar(r(7478),t),o.__exportStar(r(8933),t),o.__exportStar(r(2428),t),o.__exportStar(r(9369),t),o.__exportStar(r(6829),t),i.default.extend(s.default),i.default.extend(n.default)},2902:(e,t,r)=>{var o,i;Object.defineProperty(t,"__esModule",{value:!0}),t.BoilerplateModule=void 0;const n=r(752),s=r(143),a=r(8867),c=r(8933),l=r(2310),_=r(2475),p=r(2428),u=r(6829);let d=o=class BoilerplateModule{discovery;static RegisterCache=p.RegisterCache;static forRoot(){const e=[...l.CONFIG_PROVIDERS.values()],t=[...c.LOGGER_PROVIDERS.values()];return{exports:[...e,...t,u.AutoLogService,u.AutoConfigService,u.CacheProviderService,u.FetchService,u.ModuleScannerService,u.WorkspaceService],global:!0,imports:[(0,p.RegisterCache)(),s.DiscoveryModule],module:o,providers:[...e,...t,u.AutoLogService,u.AutoConfigService,u.CacheProviderService,u.EventsExplorerService,u.FetchService,u.LifecycleService,u.LogExplorerService,u.ModuleScannerService,u.ScheduleExplorerService,u.WorkspaceService]}}constructor(e){this.discovery=e}configure(){this.discovery.load()}};d=o=n.__decorate([(0,_.LibraryModule)({configuration:{[a.CACHE_PROVIDER]:{default:"memory",description:"Redis is preferred if available",enum:["redis","memory"],type:"string"},[a.CACHE_TTL]:{default:86400,description:"Configuration property for redis connection",type:"number"},[a.CONFIG]:{description:["Consumable as CLI switch only","If provided, all other file based configurations will be ignored","Environment variables + CLI switches will operate normally"].join(". "),type:"string"},[a.LOG_LEVEL]:{default:"info",description:"Minimum log level to process",enum:["info","warn","debug"],type:"string"},[a.REDIS_HOST]:{default:"localhost",description:"Configuration property for redis connection",type:"string"},[a.REDIS_PORT]:{default:6379,description:"Configuration property for redis connection",type:"number"},[a.SCAN_CONFIG]:{default:!1,description:"Find all application configurations and output as json",type:"boolean"}},exports:[u.AutoConfigService,u.AutoLogService,u.CacheProviderService,u.FetchService,u.WorkspaceService],imports:[(0,p.RegisterCache)(),s.DiscoveryModule],library:a.LIB_BOILERPLATE,providers:[u.AutoConfigService,u.AutoLogService,u.CacheProviderService,u.ConfigScanner,u.EventsExplorerService,u.FetchService,u.LifecycleService,u.LogExplorerService,u.ModuleScannerService,u.ScheduleExplorerService,u.WorkspaceService]}),n.__metadata("design:paramtypes",["function"==typeof(i=void 0!==u.LogExplorerService&&u.LogExplorerService)?i:Object])],d),t.BoilerplateModule=d},9369:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),r(752).__exportStar(r(2902),t)},2246:(e,t,r)=>{var o,i,n,s,a;Object.defineProperty(t,"__esModule",{value:!0}),t.AutoConfigService=void 0;const c=r(752),l=r(6481),_=r(761),p=r(7147),u=r(8519),d=c.__importDefault(r(1566)),f=r(8665),g=r(1017),E=r(7282),A=r(8867),h=r(7478),O=r(8933),S=r(2428),v=r(2636),y=r(6058);let T=E.argv,R=o=class AutoConfigService{configDefaults;APPLICATION;bootOptions;logger;workspace;static setSwitches(e){T=e}constructor(e={},t,r,o,i,n){this.configDefaults=e,this.APPLICATION=t,this.bootOptions=r,this.logger=i,this.workspace=n,!0!==o&&this.earlyInit(),v.AutoLogService.logger.level=this.get([A.LIB_BOILERPLATE,A.LOG_LEVEL])}configFiles;loadedConfigFiles;config={};loadedConfigPath;switches;get appName(){return this.APPLICATION.description}get(e){Array.isArray(e)&&(e=e[_.LABEL].description===this.APPLICATION.description?["application",e[_.VALUE]].join("."):["libs",e[_.LABEL].description,e[_.VALUE]].join("."));const t=(0,f.get)(this.config,e)??this.getConfiguration(e)?.default,r=this.getConfiguration(e);return this.cast(t,r.type)}getDefault(e){const t=(0,f.get)(this.configDefaults??{},e);if(!_.is.undefined(t))return t;const r=this.getConfiguration(e);return r||(this.logger.fatal({path:e},"Unknown configuration. Double check {project.json} assets + make sure property is included in metadata"),(0,E.exit)()),r.default}set(e,t,r=!1){Array.isArray(e)&&(e=["libs",e[_.LABEL].description,e[_.VALUE]].join(".")),(0,f.set)(this.config,e,t),r&&(0,p.writeFileSync)(this.loadedConfigPath,(0,u.encode)(this.config))}onPreInit(){this.sanityCheck()}cast(e,t){switch(t){case"boolean":return e??="",_.is.boolean(e)?e:["true","y","1"].includes(e.toLowerCase());case"number":return Number(e);case"string[]":return _.is.undefined(e)?[]:Array.isArray(e)?e.map(String):[String(e)]}return e}earlyInit(e=T){if(this.switches=(0,d.default)(e),this.config={},this.setDefaults(),(0,_.deepExtend)(this.config,this.configDefaults??{}),this.logger.setContext(A.LIB_BOILERPLATE,o),this.logger.context=[A.LIB_BOILERPLATE.description,o.name].join(":"),this.APPLICATION&&this.APPLICATION!==O.NO_APPLICATION){const[e,t]=this.workspace.loadMergedConfig(this.switches.config?[(0,g.resolve)(this.switches.config)]:this.workspace.configFilePaths(this.appName));this.configFiles=t,e.forEach(((e,t)=>{(0,_.deepExtend)(this.config,e),this.logger.debug(`Loaded configuration from {${t}}`)}))}else this.configFiles=[];this.loadFromEnv()}getConfiguration(e){const{configs:t}=O.LibraryModule,r=e.split(".");if(r.length===_.SINGLE&&r.unshift(this.appName),r.length===_.PAIR){const e=t.get(this.appName).configuration[r[_.VALUE]]??O.MESSY_INJECTED_CONFIGS.get(r[_.VALUE]);return _.is.empty(Object.keys(e??{}))?{default:this.loadAppDefault(r[_.VALUE]),type:"string"}:e}const[,o,i]=r,n=t.get(o);if(!n)throw new l.InternalServerErrorException(`Missing metadata asset for ${o} (via ${e})`);return n.configuration[i]}loadAppDefault(e){return E.env[e]??E.env[e.toLowerCase()]??this.switches[e]??this.switches[e.toLowerCase()]}loadFromEnv(){const e=Object.keys(E.env),t=Object.keys(this.switches);O.LibraryModule.configs.forEach((({configuration:r},o)=>{r??={};const i=o?.replaceAll("-","_")||"unknown",n=this.APPLICATION?.description===o,s=n?"application":`libs_${i}`,a=n?"application":`libs.${i}`;Object.keys(r).forEach((r=>{const o=[`${s}_${r}`,r],i=`${a}.${r}`;if(o.find((e=>t.includes(e)))||o.find((e=>{const r=new RegExp(`^${e.replaceAll(new RegExp("[-_]","gi"),"[-_]?")}$`,"gi");return t.some((e=>e.match(r)))}))){const e=t.find((e=>o.some((t=>e.match(new RegExp(`^${t.replaceAll(new RegExp("[-_]","gi"),"[-_]?")}$`,"gi"))))));return void(0,f.set)(this.config,i,this.switches[e])}const n=o.find((t=>e.includes(t)))||o.find((t=>{const r=new RegExp(`^${t.replaceAll(new RegExp("[-_]","gi"),"[-_]?")}$`,"gi");return e.some((e=>e.match(r)))}));if(_.is.empty(n))return;const c=e.find((e=>o.some((t=>e.match(new RegExp(`^${t.replaceAll(new RegExp("[-_]","gi"),"[-_]?")}$`,"gi"))))));(0,f.set)(this.config,i,E.env[c])}))}))}sanityCheck(){O.LibraryModule.configs.forEach((({configuration:e},t)=>{e??={},Object.entries(e).forEach((([e,r])=>{const o=this.get([Symbol.for(t),e]);r.required&&_.is.undefined(o)&&(this.logger.fatal({...r},`Project [${t}] requires {${e}} to be provided`),(0,E.exit)())}))}))}setDefaults(){O.LibraryModule.configs.forEach((({configuration:e},t)=>{const r=this.appName===t;Object.keys(e).forEach((o=>{if(!_.is.undefined(e[o].default)){let i=e[o].default;i=Array.isArray(i)?[...i]:_.is.object(i)?{...i}:i,(0,f.set)(this.config,`${r?"application":`libs.${t}`}.${o}`,i)}}))}))}};R=o=c.__decorate([(0,l.Injectable)(),c.__param(0,(0,l.Optional)()),c.__param(0,(0,l.Inject)(h.CONFIG_DEFAULTS)),c.__param(1,(0,l.Inject)(h.ACTIVE_APPLICATION)),c.__param(2,(0,l.Optional)()),c.__param(2,(0,l.Inject)(h.BOOTSTRAP_OPTIONS)),c.__param(3,(0,l.Optional)()),c.__param(3,(0,l.Inject)(h.SKIP_CONFIG_INIT)),c.__metadata("design:paramtypes",["function"==typeof(i=void 0!==h.AbstractConfig&&h.AbstractConfig)?i:Object,Symbol,"function"==typeof(n=void 0!==S.BootstrapOptions&&S.BootstrapOptions)?n:Object,Boolean,"function"==typeof(s=void 0!==v.AutoLogService&&v.AutoLogService)?s:Object,"function"==typeof(a=void 0!==y.WorkspaceService&&y.WorkspaceService)?a:Object])],R),t.AutoConfigService=R},2636:(e,t,r)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),t.AutoLogService=t.NEST_NOOP_LOGGER=t.storage=void 0;const i=r(752),n=r(6481),s=r(143),a=r(761),c=r(852),l=i.__importDefault(r(8545)),_=r(7478),p=r(8933);t.storage=new c.AsyncLocalStorage,t.NEST_NOOP_LOGGER={error:(...e)=>{console.error(...e)},log:()=>{},warn:()=>{}};const u=(0,l.default)();let d=o=class AutoLogService{parent;activeApplication;static logger=u;static nestLogger={debug:(e,t)=>o.logger.debug({context:`@nestjs:${t}`},e),error:(e,t)=>o.logger.error({context:`@nestjs:${t}`},e),log:(e,t)=>o.logger.info({context:`@nestjs:${t}`},e),verbose:(e,t)=>o.logger.debug({context:`@nestjs:${t}`},e),warn:(e,t)=>o.logger.warn({context:`@nestjs:${t}`},e)};static prettyLogger=!1;static call(e,t,...r){if("trace"===e&&"trace"!==o.logger.level)return;const i=this.getLogger(),n=a.is.object(r[0])?r.shift():{},s=a.is.string(r[0])?r.shift():"";i[e]({context:t,...n},s,...r)}static getLogger(){return t.storage.getStore()||o.logger}constructor(e,t){this.parent=e,this.activeApplication=t}#e;#t;contextId;get level(){return o.logger.level}get context(){if(!this.#e){this.#e??=this.getContext();const[e,t]=this.#e.split(":");e===this.activeApplication.description&&(this.#e=t)}return this.#e}set context(e){this.#t=e}debug(...e){o.call("debug",this.context,...e)}error(...e){o.call("error",this.context,...e)}fatal(...e){o.call("fatal",this.context,...e)}info(...e){o.call("info",this.context,...e)}setContext(e,t){this.#t=`${e.description}:${t.name}`}trace(...e){o.call("trace",this.context,...e)}warn(...e){o.call("warn",this.context,...e)}getContext(){return this.#t?this.#t:this.contextId?p.mappedContexts.get(this.contextId):this.parent?.constructor[_.LOG_CONTEXT]??_.MISSING_CONTEXT}};d=o=i.__decorate([(0,n.Injectable)({scope:n.Scope.TRANSIENT}),i.__param(0,(0,n.Inject)(s.INQUIRER)),i.__param(1,(0,n.Inject)(_.ACTIVE_APPLICATION)),i.__metadata("design:paramtypes",[Object,Symbol])],d),t.AutoLogService=d},340:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CacheProviderService=void 0;const o=r(752),i=r(6481),n=o.__importDefault(r(5768)),s=r(8867),a=r(2310);let c=class CacheProviderService{cacheProvider;host;port;defaultTtl;constructor(e,t,r,o){this.cacheProvider=e,this.host=t,this.port=r,this.defaultTtl=o}getConfig(){const e=this.defaultTtl;return"memory"===this.cacheProvider?{isGlobal:!0,ttl:e}:{host:this.host,isGlobal:!0,port:this.port,store:n.default,ttl:e}}};c=o.__decorate([(0,i.Injectable)(),o.__param(0,(0,a.InjectConfig)(s.CACHE_PROVIDER)),o.__param(1,(0,a.InjectConfig)(s.REDIS_HOST)),o.__param(2,(0,a.InjectConfig)(s.REDIS_PORT)),o.__param(3,(0,a.InjectConfig)(s.CACHE_TTL)),o.__metadata("design:paramtypes",[String,String,Number,Number])],c),t.CacheProviderService=c},2350:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigScanner=void 0;const o=r(752),i=r(6481),n=r(7282),s=r(8867),a=r(2310),c=r(2428);let l=class ConfigScanner{scanConfig;constructor(e){this.scanConfig=e}onRewire(e,t){this.scanConfig&&this.scanConfig&&(console.log(JSON.stringify((0,c.ScanConfig)(e,t?.config))),(0,n.exit)())}};l=o.__decorate([(0,i.Injectable)(),o.__param(0,(0,a.InjectConfig)(s.SCAN_CONFIG)),o.__metadata("design:paramtypes",[Boolean])],l),t.ConfigScanner=l},1359:(e,t,r)=>{var o,i,n,s,a;Object.defineProperty(t,"__esModule",{value:!0}),t.EventsExplorerService=void 0;const c=r(752),l=r(6481),_=r(143),p=r(761),u=c.__importDefault(r(5502)),d=r(9830),f=r(7478),g=r(4208),E=r(2636);let A=class EventsExplorerService{discovery;eventEmitter;logger;metadataScanner;reflector;constructor(e,t,r,o,i){this.discovery=e,this.eventEmitter=t,this.logger=r,this.metadataScanner=o,this.reflector=i}getEventHandlerMetadata(e){return this.reflector.get(g.EVENT_LISTENER_METADATA,e)}loadEventListeners(){[...this.discovery.getProviders(),...this.discovery.getControllers()].filter((e=>e.isDependencyTreeStatic())).filter((e=>e.instance)).forEach((e=>{const{instance:t}=e,r=Object.getPrototypeOf(t);r&&!(0,d.isProxy)(t)&&this.metadataScanner.scanFromPrototype(t,r,(e=>{this.subscribe(t,e)}))}))}onApplicationBootstrap(){this.loadEventListeners()}onApplicationShutdown(){this.eventEmitter.removeAllListeners()}subscribe(e,t){const r=this.getEventHandlerMetadata(e[t]);if(!r)return;const{event:o}=r,i=e.constructor[f.LOG_CONTEXT],n=Array.isArray(o)?o:[o];this.logger.debug(`${i}#${t} event subscribe ${n.map((e=>`{${p.is.string(e)?e:e.description}}`)).join(", ")}`),(Array.isArray(o)?o:[o]).forEach((r=>this.eventEmitter.on(r,((...r)=>e[t].call(e,...r)))))}};A=c.__decorate([(0,l.Injectable)(),c.__metadata("design:paramtypes",["function"==typeof(o=void 0!==_.DiscoveryService&&_.DiscoveryService)?o:Object,"function"==typeof(i=void 0!==u.default&&u.default)?i:Object,"function"==typeof(n=void 0!==E.AutoLogService&&E.AutoLogService)?n:Object,"function"==typeof(s=void 0!==_.MetadataScanner&&_.MetadataScanner)?s:Object,"function"==typeof(a=void 0!==_.Reflector&&_.Reflector)?a:Object])],A),t.EventsExplorerService=A},9194:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=r(752);o.__exportStar(r(1359),t),o.__exportStar(r(2437),t),o.__exportStar(r(618),t),o.__exportStar(r(301),t)},2437:(e,t,r)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),t.LogExplorerService=void 0;const i=r(752),n=r(6481),s=r(143),a=r(761),c=r(8867),l=r(7478),_=r(8933),p=r(2310),u=new Set(["ModuleRef","","useFactory"]);let d=class LogExplorerService{discovery;logLevel;constructor(e,t){this.discovery=e,this.logLevel=t}load(){[...this.discovery.getControllers(),...this.discovery.getProviders()].filter((({instance:e})=>!!e)).forEach((e=>{const{instance:t,host:r}=e,o=t.constructor;if(!o||!o[l.LOGGER_LIBRARY])return;const i=o[l.LOGGER_LIBRARY];[...r.providers.values(),...r.controllers.values()].forEach((({metatype:e})=>{if(u.has(e?.name??"")||!a.is.undefined(e[l.LOG_CONTEXT]))return;const t=`${i}:${e.name}`;_.mappedContexts.forEach(((r,o)=>{r===e.name&&_.mappedContexts.set(o,t)})),e[l.LOG_CONTEXT]??=t,e[l.LOGGER_LIBRARY]??=i}))}))}};d=i.__decorate([(0,n.Injectable)(),i.__param(1,(0,p.InjectConfig)(c.LOG_LEVEL)),i.__metadata("design:paramtypes",["function"==typeof(o=void 0!==s.DiscoveryService&&s.DiscoveryService)?o:Object,String])],d),t.LogExplorerService=d},618:(e,t,r)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleScannerService=void 0;const i=r(752),n=r(6481),s=r(143),a=r(761),c=r(7478);let l=class ModuleScannerService{discovery;constructor(e){this.discovery=e}applicationProviders(){return this.getProviders().filter((e=>{const t=e.constructor;return t&&!a.is.undefined(t[c.LOGGER_LIBRARY])}))}findWithSymbol(e){const t=new Map;return this.applicationProviders().forEach((r=>{const o=r.constructor;o&&(a.is.undefined(o[e])||t.set(r,o[e]))})),t}getProviders(){return[...this.discovery.getControllers(),...this.discovery.getProviders()].filter((e=>!!e.instance)).map((e=>e.instance))}};l=i.__decorate([(0,n.Injectable)(),i.__metadata("design:paramtypes",["function"==typeof(o=void 0!==s.DiscoveryService&&s.DiscoveryService)?o:Object])],l),t.ModuleScannerService=l},301:(e,t,r)=>{var o,i,n,s;Object.defineProperty(t,"__esModule",{value:!0}),t.ScheduleExplorerService=void 0;const a=r(752),c=r(6481),l=r(143),_=r(7024),p=r(761),u=r(6857),d=r(9830),f=r(7478),g=r(2636);let E=class ScheduleExplorerService{logger;discovery;metadataScanner;reflector;constructor(e,t,r,o){this.logger=e,this.discovery=t,this.metadataScanner=r,this.reflector=o}onApplicationBootstrap(){[...this.discovery.getControllers(),...this.discovery.getProviders()].forEach((e=>{const{instance:t}=e;t&&Object.getPrototypeOf(t)&&!(0,d.isProxy)(t)&&this.metadataScanner.scanFromPrototype(t,Object.getPrototypeOf(t),(e=>{const r=this.reflector.get(p.CRON_SCHEDULE,t[e]);r&&(this.logger.debug(`${t.constructor[f.LOG_CONTEXT]}#${e} cron {${r}}`),new u.CronJob(r,(()=>t[e]())).start())}))}))}};E=a.__decorate([(0,c.Injectable)(),a.__metadata("design:paramtypes",["function"==typeof(o=void 0!==g.AutoLogService&&g.AutoLogService)?o:Object,"function"==typeof(i=void 0!==l.DiscoveryService&&l.DiscoveryService)?i:Object,"function"==typeof(n=void 0!==_.MetadataScanner&&_.MetadataScanner)?n:Object,"function"==typeof(s=void 0!==l.Reflector&&l.Reflector)?s:Object])],E),t.ScheduleExplorerService=E},3925:(e,t,r)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),t.FetchService=void 0;const i=r(752),n=r(6481),s=r(761),a=i.__importDefault(r(1055)),c=r(7147),l=i.__importDefault(r(4809)),_=r(7816),p=r(2636);let u=class FetchService{logger;constructor(e){this.logger=e}BASE_URL;TRUNCATE_LENGTH=200;limiter;bottleneck(e){this.limiter=new a.default(e),this.limiter.on("error",(e=>{this.logger.error({...e},"Error caught in limiter")}))}async download({destination:e,...t}){const r=await this.fetchCreateUrl(t),o=await this.fetchCreateMeta(t),i=await(0,l.default)(r,o);await new Promise(((t,r)=>{const o=(0,c.createWriteStream)(e);i.body.pipe(o),i.body.on("error",(e=>r(e))),o.on("finish",(()=>t()))}))}async fetch(e){return this.limiter?this.limiter.schedule((async()=>await this.immediateFetch(e))):await this.immediateFetch(e)}fetchCreateUrl({rawUrl:e,url:t,...r}){let o=e?t:`${r.baseUrl??this.BASE_URL}${t}`;return r.params&&(o=`${o}?${this.buildFilterString(r)}`),o}buildFilterString(e){return new URLSearchParams({...Object.fromEntries(Object.entries(e.params??{}).map((([e,t])=>[e,this.cast(t)])))}).toString()}fetchCreateMeta({body:e,...t}){const r={...t.headers};let o=t.method??"get";return e&&(o="get"===t.method?"post":t.method,r["Content-Type"]="application/json"),s.is.object(e)&&(e=JSON.stringify(e)),{body:e,headers:r,method:o}}async fetchHandleResponse({process:e},t){if(!1===e)return t;const r=await t.text();if("text"===e)return r;if(!["{","["].includes(r.charAt(s.FIRST)))return["OK"].includes(r)?this.logger.debug({text:r},"Full response text"):this.logger.warn({text:r},"Unexpected API Response"),r;const o=JSON.parse(r);return this.checkForHttpErrors(o)}async immediateFetch(e){const t=await this.fetchCreateUrl(e),r=await this.fetchCreateMeta(e);try{const o=await(0,l.default)(t,r);return!1===e.process?o:await this.fetchHandleResponse(e,o)}catch(e){return void this.logger.error({error:e})}}cast(e){return Array.isArray(e)?e.map((e=>this.cast(e))).join(","):e instanceof Date?e.toISOString():s.is.number(e)?e.toString():s.is.boolean(e)?e?"true":"false":e}checkForHttpErrors(e){return s.is.object(e)&&null!==e?(s.is.number(e.statusCode)&&s.is.string(e.error)&&this.logger.error({error:e},e.message),e):e}};u=i.__decorate([(0,n.Injectable)({scope:n.Scope.TRANSIENT}),i.__param(0,(0,_.TransientLogger)()),i.__metadata("design:paramtypes",["function"==typeof(o=void 0!==p.AutoLogService&&p.AutoLogService)?o:Object])],u),t.FetchService=u},6829:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=r(752);o.__exportStar(r(2246),t),o.__exportStar(r(2636),t),o.__exportStar(r(340),t),o.__exportStar(r(2350),t),o.__exportStar(r(9194),t),o.__exportStar(r(3925),t),o.__exportStar(r(5521),t),o.__exportStar(r(6058),t)},5521:(e,t,r)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),t.LifecycleService=void 0;const i=r(752),n=r(6481),s=r(761),a=r(618);let c=class LifecycleService{scanner;constructor(e){this.scanner=e}async postInit(e,{server:t,options:r}){const o=[];this.scanner.applicationProviders().forEach((e=>{e.onPostInit&&o.push(e)})),await(0,s.eachSeries)(o,(async o=>{await o.onPostInit(e,t,r)}))}async preInit(e,{server:t,options:r}){const o=[];this.scanner.applicationProviders().forEach((e=>{(e.onPreInit||e.onRewire)&&o.push(e)})),await(0,s.eachSeries)(o,(async t=>{t.onRewire&&await t.onRewire(e,r)})),await(0,s.eachSeries)(o,(async o=>{o.onPostInit&&await o.onPreInit(e,t,r)}))}};c=i.__decorate([(0,n.Injectable)(),i.__metadata("design:paramtypes",["function"==typeof(o=void 0!==a.ModuleScannerService&&a.ModuleScannerService)?o:Object])],c),t.LifecycleService=c},6058:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceService=void 0;const o=r(752),i=r(6481),n=r(761),s=o.__importDefault(r(1327)),a=r(7147),c=r(8519),l=r(6473),_=r(2037),p=r(1017),u=r(7282),d=r(8419),f=["json","ini","yaml","yml"];let g=class WorkspaceService{application;constructor(e){this.application=e}isWindows="win32"===u.platform;configFilePaths(e=this.application.description){const t=[];this.isWindows||t.push(...this.withExtensions((0,p.join)("/etc",e,"config")),...this.withExtensions((0,p.join)("/etc",`${e}rc`)));let r,o=(0,u.cwd)();for(;!n.is.empty(o)&&(t.push((0,p.join)(o,`.${e}rc`)),r=(0,p.join)(o,".."),r!==o);)o=r;return t.push(...this.withExtensions((0,p.join)((0,_.homedir)(),".config",e)),...this.withExtensions((0,p.join)((0,_.homedir)(),".config",e,"config"))),t}isApplication(e){return this.application.description===e}isProject(e){return this.application.description!==e}loadConfigFromFile(e,t){if(!(0,a.existsSync)(t))return e;const r=(0,a.readFileSync)(t,"utf8").trim();if(!f.some((o=>{if(t.slice(o.length*n.INVERT_VALUE).toLowerCase()===o)switch(o){case"ini":return e.set(t,(0,c.decode)(r)),!0;case"yaml":case"yml":return e.set(t,(0,l.load)(r)),!0;case"json":return e.set(t,s.default.parse(r)),!0}return!1}))){if("{"===r[n.START])return e.set(t,s.default.parse(r)),!0;try{const o=(0,l.load)(r);if(n.is.object(o))return e.set(t,o),!0}catch{}return e.set(t,(0,c.decode)(r)),!0}}loadMergedConfig(e=[]){const t=new Map,r=[];return e.forEach((e=>{this.loadConfigFromFile(t,e),r.push(e)})),[t,r]}withExtensions(e){return[e,...f.map((t=>`${e}.${t}`))]}};g=o.__decorate([(0,i.Injectable)(),o.__param(0,(0,i.Inject)(d.ACTIVE_APPLICATION)),o.__metadata("design:paramtypes",[Symbol])],g),t.WorkspaceService=g},4803:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.eachSeries=t.each=void 0;const o=r(7872);t.each=async function(e=[],t){await Promise.all(e.map((async e=>await t(e))))},t.eachSeries=async function(e,t){if(e instanceof Set&&(e=[...e.values()]),!Array.isArray(e))throw new TypeError("Not provided an array");for(let r=o.START;r<=e.length-o.ARRAY_OFFSET;r++)await t(e[r])}},7438:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.INTERVAL_SCHEDULE=t.CRON_SCHEDULE=t.CronExpression=void 0,(r=t.CronExpression||(t.CronExpression={})).EVERY_SECOND="* * * * * *",r.EVERY_5_SECONDS="*/5 * * * * *",r.EVERY_10_SECONDS="*/10 * * * * *",r.EVERY_30_SECONDS="*/30 * * * * *",r.EVERY_MINUTE="*/1 * * * *",r.EVERY_5_MINUTES="0 */5 * * * *",r.EVERY_10_MINUTES="0 */10 * * * *",r.EVERY_30_MINUTES="0 */30 * * * *",r.EVERY_HOUR="0 0-23/1 * * *",r.EVERY_2_HOURS="0 0-23/2 * * *",r.EVERY_3_HOURS="0 0-23/3 * * *",r.EVERY_4_HOURS="0 0-23/4 * * *",r.EVERY_5_HOURS="0 0-23/5 * * *",r.EVERY_6_HOURS="0 0-23/6 * * *",r.EVERY_7_HOURS="0 0-23/7 * * *",r.EVERY_8_HOURS="0 0-23/8 * * *",r.EVERY_9_HOURS="0 0-23/9 * * *",r.EVERY_10_HOURS="0 0-23/10 * * *",r.EVERY_11_HOURS="0 0-23/11 * * *",r.EVERY_12_HOURS="0 0-23/12 * * *",r.EVERY_DAY_AT_1AM="0 01 * * *",r.EVERY_DAY_AT_2AM="0 02 * * *",r.EVERY_DAY_AT_3AM="0 03 * * *",r.EVERY_DAY_AT_4AM="0 04 * * *",r.EVERY_DAY_AT_5AM="0 05 * * *",r.EVERY_DAY_AT_6AM="0 06 * * *",r.EVERY_DAY_AT_7AM="0 07 * * *",r.EVERY_DAY_AT_8AM="0 08 * * *",r.EVERY_DAY_AT_9AM="0 09 * * *",r.EVERY_DAY_AT_10AM="0 10 * * *",r.EVERY_DAY_AT_11AM="0 11 * * *",r.EVERY_DAY_AT_NOON="0 12 * * *",r.EVERY_DAY_AT_1PM="0 13 * * *",r.EVERY_DAY_AT_2PM="0 14 * * *",r.EVERY_DAY_AT_3PM="0 15 * * *",r.EVERY_DAY_AT_4PM="0 16 * * *",r.EVERY_DAY_AT_5PM="0 17 * * *",r.EVERY_DAY_AT_6PM="0 18 * * *",r.EVERY_DAY_AT_7PM="0 19 * * *",r.EVERY_DAY_AT_8PM="0 20 * * *",r.EVERY_DAY_AT_9PM="0 21 * * *",r.EVERY_DAY_AT_10PM="0 22 * * *",r.EVERY_DAY_AT_11PM="0 23 * * *",r.EVERY_DAY_AT_MIDNIGHT="0 0 * * *",r.EVERY_WEEK="0 0 * * 0",r.EVERY_WEEKDAY="0 0 * * 1-5",r.EVERY_WEEKEND="0 0 * * 6,0",r.EVERY_1ST_DAY_OF_MONTH_AT_MIDNIGHT="0 0 1 * *",r.EVERY_1ST_DAY_OF_MONTH_AT_NOON="0 12 1 * *",r.EVERY_2ND_HOUR="0 */2 * * *",r.EVERY_2ND_HOUR_FROM_1AM_THROUGH_11PM="0 1-23/2 * * *",r.EVERY_2ND_MONTH="0 0 1 */2 *",r.EVERY_QUARTER="0 0 1 */3 *",r.EVERY_6_MONTHS="0 0 1 */6 *",r.EVERY_YEAR="0 0 1 1 *",r.EVERY_30_MINUTES_BETWEEN_9AM_AND_5PM="0 */30 9-17 * * *",r.EVERY_30_MINUTES_BETWEEN_9AM_AND_6PM="0 */30 9-18 * * *",r.EVERY_30_MINUTES_BETWEEN_10AM_AND_7PM="0 */30 10-19 * * *",r.MONDAY_TO_FRIDAY_AT_1AM="0 0 01 * * 1-5",r.MONDAY_TO_FRIDAY_AT_2AM="0 0 02 * * 1-5",r.MONDAY_TO_FRIDAY_AT_3AM="0 0 03 * * 1-5",r.MONDAY_TO_FRIDAY_AT_4AM="0 0 04 * * 1-5",r.MONDAY_TO_FRIDAY_AT_5AM="0 0 05 * * 1-5",r.MONDAY_TO_FRIDAY_AT_6AM="0 0 06 * * 1-5",r.MONDAY_TO_FRIDAY_AT_7AM="0 0 07 * * 1-5",r.MONDAY_TO_FRIDAY_AT_8AM="0 0 08 * * 1-5",r.MONDAY_TO_FRIDAY_AT_9AM="0 0 09 * * 1-5",r.MONDAY_TO_FRIDAY_AT_09_30AM="0 30 09 * * 1-5",r.MONDAY_TO_FRIDAY_AT_10AM="0 0 10 * * 1-5",r.MONDAY_TO_FRIDAY_AT_11AM="0 0 11 * * 1-5",r.MONDAY_TO_FRIDAY_AT_11_30AM="0 30 11 * * 1-5",r.MONDAY_TO_FRIDAY_AT_12PM="0 0 12 * * 1-5",r.MONDAY_TO_FRIDAY_AT_1PM="0 0 13 * * 1-5",r.MONDAY_TO_FRIDAY_AT_2PM="0 0 14 * * 1-5",r.MONDAY_TO_FRIDAY_AT_3PM="0 0 15 * * 1-5",r.MONDAY_TO_FRIDAY_AT_4PM="0 0 16 * * 1-5",r.MONDAY_TO_FRIDAY_AT_5PM="0 0 17 * * 1-5",r.MONDAY_TO_FRIDAY_AT_6PM="0 0 18 * * 1-5",r.MONDAY_TO_FRIDAY_AT_7PM="0 0 19 * * 1-5",r.MONDAY_TO_FRIDAY_AT_8PM="0 0 20 * * 1-5",r.MONDAY_TO_FRIDAY_AT_9PM="0 0 21 * * 1-5",r.MONDAY_TO_FRIDAY_AT_10PM="0 0 22 * * 1-5",r.MONDAY_TO_FRIDAY_AT_11PM="0 0 23 * * 1-5",t.CRON_SCHEDULE=Symbol("CRON_SCHEDULE"),t.INTERVAL_SCHEDULE=Symbol("INTERVAL_SCHEDULE")},9679:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deepExtend=void 0;const o=r(1696);function i(e){return e instanceof Buffer||e instanceof Date||e instanceof RegExp}function n(e){if(e instanceof Buffer){const t=Buffer.alloc(e.length);return e.copy(t),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e);throw new TypeError("Unexpected situation")}function s(e){return e.map((e=>o.is.object(e)?Array.isArray(e)?s(e):i(e)?n(e):c({},e):e))}function a(e,t){return"__proto__"===t?void 0:e[t]}function c(e,t){return"object"!=typeof t||null===t||Array.isArray(t)||Object.keys(t).forEach((r=>{const o=a(e,r),l=a(t,r);l!==e&&("object"==typeof l&&null!==l?Array.isArray(l)?e[r]=s(l):i(l)?e[r]=n(l):"object"!=typeof o||null===o||Array.isArray(o)?e[r]=c({},l):e[r]=c(o,l):e[r]=l)})),e}t.deepExtend=c},761:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=r(752);o.__exportStar(r(4803),t),o.__exportStar(r(7438),t),o.__exportStar(r(9679),t),o.__exportStar(r(1696),t),o.__exportStar(r(2223),t),o.__exportStar(r(4194),t),o.__exportStar(r(7872),t)},1696:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.is=void 0;const o=r(7872);class is{static hash={string(e){let t=o.START;for(let r=o.START;r<e.length;r++)t=(t<<5)-t+e.codePointAt(r),t=Math.trunc(t);return t.toString()}};static boolean(e){return"boolean"==typeof e}static date(e){return e instanceof Date}static empty(e){return is.string(e)||Array.isArray(e)?e.length===o.EMPTY:e instanceof Map||e instanceof Set?e.size===o.EMPTY:!is.object(e)||Object.keys(e).length===o.EMPTY}static even(e){return e%o.EVEN===o.EMPTY}static function(e){return"function"==typeof e}static number(e){return"number"==typeof e&&!Number.isNaN(e)}static object(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}static string(e){return"string"==typeof e}static symbol(e){return"symbol"==typeof e}static undefined(e){return void 0===e}static unique(e){return e.filter(((e,t,r)=>r.indexOf(e)===t))}}t.is=is},2223:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.queryToControl=t.buildFilter=t.controlToQuery=t.ResultControlDTO=t.FilterDTO=t.ComparisonDTO=t.FILTER_OPERATIONS=t.HTTP_METHODS=void 0;const o=r(1696);var i,n;(n=t.HTTP_METHODS||(t.HTTP_METHODS={})).get="get",n.delete="delete",n.put="put",n.head="head",n.options="options",n.patch="patch",n.index="index",n.post="post",function(e){e.elem="elem",e.regex="regex",e.in="in",e.nin="nin",e.lt="lt",e.lte="lte",e.gt="gt",e.gte="gte",e.exists="exists",e.empty="empty",e.ne="ne",e.eq="eq"}(i=t.FILTER_OPERATIONS||(t.FILTER_OPERATIONS={}));class ComparisonDTO{operation;value}t.ComparisonDTO=ComparisonDTO,t.FilterDTO=class FilterDTO extends ComparisonDTO{empty;exists;field},t.ResultControlDTO=class ResultControlDTO{filters;limit;select;skip;sort},t.controlToQuery=function(e){const t=new Map;return e?.limit&&t.set("limit",e.limit.toString()),e?.skip&&t.set("skip",e.skip.toString()),e?.sort&&t.set("sort",e.sort.join(",")),e?.select&&t.set("select",e.select.join(",")),e?.filters?.forEach((e=>{let r=e.field;e.operation&&e.operation!==i.eq&&(r=`${r}__${e.operation}`);let o=e.value;Array.isArray(o)&&(o=o.join(",")),o instanceof Date&&(o=o.toISOString()),null===o&&(o="null"),t.set(r,(o??"").toString())})),Object.fromEntries(t.entries())},t.buildFilter=function(e,t){const[r,i]=e.split("__");switch(i){case"in":case"nin":return Array.isArray(t)||(t=o.is.string(t)?t.split(","):[t]),{field:r,operation:i,value:t};case"elem":return{field:r,operation:i,value:o.is.string(t)?JSON.parse(t):t};default:return{field:r,operation:i,value:t}}},t.queryToControl=function(e){const t={filters:new Set};return new Map(Object.entries(e)).forEach(((e,r)=>{const[o,i]=r.split("__");switch(r){case"select":return void(t.select=e.split(","));case"sort":return void(t.sort=e.split(","));case"limit":return void(t.limit=Number(e));case"skip":return void(t.skip=Number(e))}switch(i){case"in":case"nin":return void t.filters.add({field:o,operation:i,value:e.split(",")});case"elem":return void t.filters.add({field:o,operation:i,value:JSON.parse(e)});default:t.filters.add({field:o,operation:i,value:e})}})),t}},4194:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TitleCase=void 0,t.TitleCase=function(e){const t=e.match(new RegExp("[a-z][A-Z]","g"));return t&&t.forEach((t=>e=e.replace(t,[...t].join(" ")))),e.split(new RegExp("[ _-]")).map(((e="")=>`${e.charAt(0).toUpperCase()}${e.slice(1)}`)).join(" ")}},7872:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PEAT=t.sleep=t.PERCENT=t.SECOND=t.DAY=t.HOUR=t.MINUTE=t.DOWN=t.NOT_FOUND=t.NO_CHANGE=t.EMPTY=t.FIRST=t.START=t.LABEL=t.SAME=t.SINGLE=t.INCREMENT=t.ARRAY_OFFSET=t.VALUE=t.UP=t.INVERT_VALUE=t.DEFAULT_LIMIT=t.TWO_THIRDS=t.HALF=t.PAIR=t.EVEN=void 0,t.EVEN=2,t.PAIR=2,t.HALF=.5,t.TWO_THIRDS=2/3,t.DEFAULT_LIMIT=5,t.INVERT_VALUE=-1,t.UP=1,t.VALUE=1,t.ARRAY_OFFSET=1,t.INCREMENT=1,t.SINGLE=1,t.SAME=0,t.LABEL=0,t.START=0,t.FIRST=0,t.EMPTY=0,t.NO_CHANGE=0,t.NOT_FOUND=-1,t.DOWN=-1,t.MINUTE=6e4,t.HOUR=36e5,t.DAY=864e5,t.SECOND=1e3,t.PERCENT=100,t.sleep=function(e=t.SECOND){let r;const o=new Promise((e=>r=e)),i=setTimeout((()=>r()),e);return o.stop=(e=!1)=>{e&&r(),clearTimeout(i),r=void 0},o},t.PEAT=function(e,r){return Array.from({length:e}).map(((e,o)=>r??o+t.ARRAY_OFFSET))}},6481:e=>{e.exports=require("@nestjs/common")},143:e=>{e.exports=require("@nestjs/core")},7024:e=>{e.exports=require("@nestjs/core/metadata-scanner")},6188:e=>{e.exports=require("@nestjs/platform-express")},1055:e=>{e.exports=require("bottleneck")},5768:e=>{e.exports=require("cache-manager-redis-store")},5022:e=>{e.exports=require("chalk")},136:e=>{e.exports=require("class-transformer")},1327:e=>{e.exports=require("comment-json")},6857:e=>{e.exports=require("cron")},1635:e=>{e.exports=require("dayjs")},5334:e=>{e.exports=require("dayjs/plugin/advancedFormat")},9912:e=>{e.exports=require("dayjs/plugin/weekOfYear")},5502:e=>{e.exports=require("eventemitter3")},6860:e=>{e.exports=require("express")},8519:e=>{e.exports=require("ini")},6473:e=>{e.exports=require("js-yaml")},1566:e=>{e.exports=require("minimist")},4809:e=>{e.exports=require("node-fetch")},8665:e=>{e.exports=require("object-path")},8545:e=>{e.exports=require("pino")},3009:e=>{e.exports=require("pino-pretty")},3236:e=>{e.exports=require("reflect-metadata")},1964:e=>{e.exports=require("rxjs")},912:e=>{e.exports=require("semver")},752:e=>{e.exports=require("tslib")},5828:e=>{e.exports=require("uuid")},852:e=>{e.exports=require("async_hooks")},7147:e=>{e.exports=require("fs")},2037:e=>{e.exports=require("os")},1017:e=>{e.exports=require("path")},7282:e=>{e.exports=require("process")},9830:e=>{e.exports=require("util/types")}},t={};function r(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}var o={};(()=>{var e=o;Object.defineProperty(e,"__esModule",{value:!0}),e.BuildPipelineService=void 0;const t=r(752),i=r(2592),n=t.__importDefault(r(1327)),s=t.__importDefault(r(1635)),a=r(7147),c=r(912);let l=class BuildPipelineService{exec(){const e=n.default.parse((0,a.readFileSync)("package.json","utf8")),t=(0,s.default)().format("YY.ww");e.version=e.version.startsWith(t)?(0,c.inc)(e.version,"patch"):`${t}.0`,(0,a.writeFileSync)("package.json",n.default.stringify(e,void 0,"  ")+"\n")}};l=t.__decorate([(0,i.QuickScript)()],l),e.BuildPipelineService=l})();var i=exports;for(var n in o)i[n]=o[n];o.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();
