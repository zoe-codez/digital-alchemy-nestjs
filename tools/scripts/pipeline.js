(()=>{var e={1279:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FORCE_APP_PATH=t.LIB_BOILERPLATE=t.CACHE_PREFIX=t.CACHE_TTL=t.CACHE_PORT=t.CACHE_HOST=t.CACHE_PROVIDER=t.CONFIG=t.SCAN_CONFIG=t.LOG_LEVEL=void 0,t.LOG_LEVEL="LOG_LEVEL",t.SCAN_CONFIG="SCAN_CONFIG",t.CONFIG="CONFIG",t.CACHE_PROVIDER="CACHE_PROVIDER",t.CACHE_HOST="CACHE_HOST",t.CACHE_PORT="CACHE_PORT",t.CACHE_TTL="CACHE_TTL",t.CACHE_PREFIX="CACHE_PREFIX",t.LIB_BOILERPLATE=Symbol("boilerplate"),t.FORCE_APP_PATH=Symbol("FORCE_APP_PATH")},6351:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractConfig=t.ConfigTypeDTO=t.ConfigDefinitionDTO=t.StringArrayConfig=t.RecordConfig=t.NumberConfig=t.InternalConfig=t.BooleanConfig=t.StringConfig=t.BaseConfig=void 0;class BaseConfig{description;required;type}t.BaseConfig=BaseConfig,t.StringConfig=class StringConfig extends BaseConfig{static isConfig(e){return"string"===e.type}enum;flags},t.BooleanConfig=class BooleanConfig extends BaseConfig{static isConfig(e){return"boolean"===e.type}},t.InternalConfig=class InternalConfig extends BaseConfig{static isConfig(e){return"internal"===e.type}},t.NumberConfig=class NumberConfig extends BaseConfig{static isConfig(e){return"number"===e.type}},t.RecordConfig=class RecordConfig extends BaseConfig{static isConfig(e){return"record"===e.type}},t.StringArrayConfig=class StringArrayConfig extends BaseConfig{static isConfig(e){return"string[]"===e.type}},t.ConfigDefinitionDTO=class ConfigDefinitionDTO{application;bootstrapOverrides;config},t.ConfigTypeDTO=class ConfigTypeDTO{library;metadata;property},t.AbstractConfig=class AbstractConfig{application;libs;config;configs}},8673:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GetLogContext=t.ACTIVE_APPLICATION=t.CONFIG_DEFAULTS=t.CONSUMES_CONFIG=t.SKIP_CONFIG_INIT=t.BOOTSTRAP_OPTIONS=t.DESCRIPTOR=t.MISSING_CONTEXT=t.WARNING_LOG=t.DEBUG_LOG=t.TRACE_LOG=t.LOG_CONTEXT=t.MODULE_METADATA=t.LOGGER_LIBRARY=void 0,t.LOGGER_LIBRARY=Symbol("LOGGER_LIBRARY"),t.MODULE_METADATA=Symbol("MODULE_METADATA"),t.LOG_CONTEXT=Symbol("LOG_CONTEXT"),t.TRACE_LOG=Symbol("TRACE_LOG"),t.DEBUG_LOG=Symbol("DEBUG_LOG"),t.WARNING_LOG=Symbol("WARNING_LOG"),t.MISSING_CONTEXT="MISSING CONTEXT",t.DESCRIPTOR=Symbol("DESCRIPTOR"),t.BOOTSTRAP_OPTIONS=Symbol("BOOTSTRAP_OPTIONS"),t.SKIP_CONFIG_INIT=Symbol("SKIP_CONFIG_INIT"),t.CONSUMES_CONFIG=Symbol("CONSUMES_CONFIG"),t.CONFIG_DEFAULTS=Symbol("CONFIG_DEFAULTS"),t.ACTIVE_APPLICATION=Symbol("ACTIVE_APPLICATION"),t.GetLogContext=e=>e?.constructor[t.LOG_CONTEXT]},8266:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=r(752);o.__exportStar(r(6351),t),o.__exportStar(r(8673),t),o.__exportStar(r(9085),t),o.__exportStar(r(794),t)},9085:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},794:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},4252:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ApplicationModule=t.NO_APPLICATION=void 0;const o=r(752).__importDefault(r(5502)),i=r(8266),n=r(2786),s=r(6605);t.NO_APPLICATION=Symbol("steggy_no_app"),t.ApplicationModule=function(e){e.application??=t.NO_APPLICATION,e.imports??=[],e.providers??=[],e.globals??=[],e.configuration??={},e.controllers??=[],[...e.providers,...e.controllers].forEach((t=>{t[i.LOGGER_LIBRARY]=e.application.description}));const r=[{provide:i.ACTIVE_APPLICATION,useValue:e.application},{provide:o.default,useValue:new o.default},...e.globals];return e.imports=[s.BoilerplateModule.forRoot(),{exports:r,global:!0,module:class{},providers:r,type:"GLOBAL_SYMBOLS"},(0,n.RegisterCache)(),...e.imports],t=>(t[i.MODULE_METADATA]=e,t[i.LOGGER_LIBRARY]=e.application.description,Object.entries(e).forEach((([e,r])=>Reflect.defineMetadata(e,r,t))),t)}},3984:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Cron=t.CronObject=void 0;const o=r(6481),i=r(1273);var n;!function(e){e[e.second=0]="second",e[e.minute=1]="minute",e[e.hour=2]="hour",e[e.dayOfMonth=3]="dayOfMonth",e[e.month=4]="month",e[e.dayOfWeek=5]="dayOfWeek"}(n=t.CronObject||(t.CronObject={})),t.Cron=function(e){return(0,o.SetMetadata)(i.CRON_SCHEDULE,i.is.string(e)?e:Object.keys(n).map((t=>e[t]??"*")).join(" "))}},4762:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OnEventMetadata=t.OnEvent=t.EVENT_LISTENER_METADATA=void 0,t.EVENT_LISTENER_METADATA="EVENT_LISTENER_METADATA",t.OnEvent=function(...e){return function(r,o,i){const n=Reflect.getMetadata(t.EVENT_LISTENER_METADATA,i.value)||{event:[]};return Reflect.defineMetadata(t.EVENT_LISTENER_METADATA,{event:[...n.event,...e]},i.value),i}},t.OnEventMetadata=class OnEventMetadata{event}},4282:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=r(752);o.__exportStar(r(4252),t),o.__exportStar(r(3984),t),o.__exportStar(r(4762),t),o.__exportStar(r(6443),t),o.__exportStar(r(2368),t),o.__exportStar(r(2589),t),o.__exportStar(r(9304),t)},6443:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InjectConfig=t.MESSY_INJECTED_CONFIGS=t.CONFIG_PROVIDERS=void 0;const o=r(6481),i=r(1273),n=r(5828),s=r(8266),a=r(5167);function c(e,r){return function(c,l,_){i.is.object(r)&&(t.MESSY_INJECTED_CONFIGS.set(e,r),r=void 0),c[s.CONSUMES_CONFIG]??=[],c[s.CONSUMES_CONFIG].push([e,r]);const p=(0,n.v4)();return t.CONFIG_PROVIDERS.add({inject:[a.AutoConfigService,s.ACTIVE_APPLICATION],provide:p,useFactory(t,o){const i=[],n=r?r.description:c[s.LOGGER_LIBRARY];if(t.configDefinitions.has(n))return n&&n!==o.description?(i.push("libs",n),t.loadProject(n)):(i.push("application"),t.loadProject(o.description)),i.push(e),t.get(i.join("."))}}),(0,o.Inject)(p)(c,l,_)}}t.CONFIG_PROVIDERS=new Set,t.MESSY_INJECTED_CONFIGS=new Map,t.InjectConfig=c,c.inject=function(e,r){const o=(0,n.v4)();return t.CONFIG_PROVIDERS.add({inject:[a.AutoConfigService,s.ACTIVE_APPLICATION],provide:o,useFactory(t){const o=[];return r?o.push("libs",r.description):o.push("application"),o.push(e),t.get(o.join("."))}}),o}},2368:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TransientLogger=t.InjectLogger=t.mappedContexts=t.LOGGER_PROVIDERS=void 0;const o=r(6481),i=r(5828),n=r(6540);function s(){const e=(0,i.v4)();return t.LOGGER_PROVIDERS.add({inject:[n.AutoLogService],provide:e,useFactory:t=>(t.contextId=e,t)}),function(r,i,n){return t.mappedContexts.set(e,r.name),(0,o.Inject)(e)(r,i,n)}}t.LOGGER_PROVIDERS=new Set,t.mappedContexts=new Map,t.InjectLogger=s,t.TransientLogger=s},2589:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LibraryModule=void 0;const o=r(6481),i=r(8266);t.LibraryModule=function(e){const t=e.library.description;return r=>{r[i.LOGGER_LIBRARY]=t,r[i.MODULE_METADATA]=e,e.providers??=[],e.providers.forEach((e=>e[i.LOGGER_LIBRARY]=t)),e.global&&(0,o.Global)()(r),delete e.global,Object.entries(e).forEach((([e,t])=>Reflect.defineMetadata(e,t,r)))}}},9304:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.QuickScript=void 0;const o=r(6481),i=r(1273),n=r(7282),s=r(8266),a=r(2786),c=r(4252);t.QuickScript=function({WAIT_TIME:e=10*i.DEFAULT_LIMIT,bootstrap:t={},controller:r,PERSISTENT:l=!1,..._}={}){return _.imports??=[],_.providers??=[],_.controllers??=[],_.application??=Symbol("steggy-quick-script"),function(p){return p[s.MODULE_METADATA]=_,setTimeout((()=>{(0,a.Bootstrap)((e=>(0,c.ApplicationModule)(e)(class{}))(_),{nestNoopLogger:!0,postInit:[t=>setTimeout((async()=>{const e=t.get(p);i.is.function(e.exec)&&(await e.exec(),l||(await t.close(),(0,n.exit)()))}),e)],prettyLog:!0,...t})}),10),_.providers.push(p),t?.http&&i.is.string(r)?(_.controllers.push(p),(0,o.Controller)(r)(p)):(0,o.Injectable)()(p)}}},2068:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Bootstrap=void 0;const o=r(752),i=r(143),n=r(6188),s=r(1355),a=r(1273),c=o.__importDefault(r(5022)),l=o.__importDefault(r(6860)),_=r(7282);t.Bootstrap=async function(e,t){const r=Reflect.getMetadata("imports",e)??[];a.is.empty(t.imports)||(r.push(...t.imports),Reflect.defineMetadata("imports",r,e));const o=r.find((e=>"GLOBAL_SYMBOLS"===e.type));o||(console.log("Bootstrap requires modules be annotated with @ApplicationModule"),(0,_.exit)()),t.flags??=[],t.globals??=[],t.globals.push({provide:s.BOOTSTRAP_OPTIONS,useFactory:()=>t});const p=[...t.globals,...t.flags.map((e=>({provide:e,useValue:!0})))];p.push({provide:s.CONFIG_DEFAULTS,useValue:t.config??{}}),o.exports.push(...p),o.providers.push(...p);let{preInit:d,postInit:u}=t;const{prettyLog:f,nestNoopLogger:g,http:E,init:A}=t;let h;f&&c.default.supportsColor&&(0,s.UsePrettyLogger)();const O={logger:g?s.NEST_NOOP_LOGGER:s.AutoLogService.nestLogger};let S;try{E?(h=(0,l.default)(),S=await i.NestFactory.create(e,new n.ExpressAdapter(h),{...O,cors:!0})):S=await i.NestFactory.create(e,O)}catch(e){console.error(e)}if(!1===A)return S;S.enableShutdownHooks();const v=S.get(s.LifecycleService);return(await S.resolve(s.AutoLogService)).setContext(s.LIB_BOILERPLATE,{name:"Bootstrap"}),d??=[],await(0,a.eachSeries)(d,(async e=>{await e(S,h,t)})),await v.preInit(S,{options:t,server:h}),await S.init(),u??=[],await(0,a.eachSeries)(u,(async e=>{await e(S,h,t)})),await v.postInit(S,{options:t,server:h}),S}},8389:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RegisterCache=void 0;const o=r(6481),i=r(6540);t.RegisterCache=function(){return o.CacheModule.registerAsync({inject:[i.CacheProviderService],useFactory:e=>e.getConfig()})}},8048:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ScanConfig=void 0;const o=r(8266),i=r(8673),n=r(6540);t.ScanConfig=function(e,t){const r=e.get(n.AutoConfigService),{description:s}=e.get(o.ACTIVE_APPLICATION),a=[];return r.configDefinitions.forEach(((e,t)=>a.push(...Object.entries(e).map((([e,r])=>({library:t===s?"application":t,metadata:r,property:e})))))),{application:e.get(o.ACTIVE_APPLICATION).description,bootstrapOverrides:t??e.get(i.CONFIG_DEFAULTS),config:a}}},2786:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=r(752);o.__exportStar(r(2068),t),o.__exportStar(r(8389),t),o.__exportStar(r(8048),t),o.__exportStar(r(6597),t)},6597:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UsePrettyLogger=t.PrettyNestLogger=t.prettyFormatMessage=t.methodColors=t.highlightContext=void 0;const o=r(752);r(3009);const i=r(1273),n=o.__importDefault(r(5022)),s=o.__importDefault(r(8545)),a=r(7282),c=r(9154),l=(0,s.default)({level:c.AutoLogService.logger.level,transport:{options:{colorize:!0,crlf:!1,customPrettifiers:{},errorLikeObjectKeys:["err","error"],errorProps:"",hideObject:!1,ignore:"pid,hostname",levelKey:"",messageKey:"msg",singleLine:!0,timestampKey:"time",translateTime:"SYS:ddd hh:MM:ss.l"},target:"pino-pretty"}},s.default.destination({sync:!0}));t.highlightContext=(e,t)=>n.default`{bold.${t.slice(2).toLowerCase()} [${e}]}`,t.methodColors=new Map([["trace","bgGrey"],["debug","bgBlue.dim"],["warn","bgYellow.dim"],["error","bgRed"],["info","bgGreen"],["fatal","bgMagenta"]]),t.prettyFormatMessage=e=>e?(e=e.replace(new RegExp("([^ ]+#[^ ]+)","g"),(e=>n.default.yellow(e))).replaceAll("] > [",n.default`] {blue >} [`).replace(new RegExp("(\\[[^\\]\\[]+\\])","g"),(e=>n.default.bold.magenta(e.slice(1,-1)))).replace(new RegExp("(\\{[^\\]}]+\\})","g"),(e=>n.default.bold.gray(e.slice(1,-1))))," - "===e.slice(0," - ".length)&&(e=`${n.default.yellowBright` - `}${e.slice(" - ".length)}`),e):"",t.PrettyNestLogger={debug:(e,r)=>{"@nestjs:InstanceLoader"==(r=`@nestjs:${r}`)&&(e=(0,t.prettyFormatMessage)(e.split(" ").map(((e,t)=>0===t?`[${e}]`:e)).join(" "))),l.debug(`${(0,t.highlightContext)(r,"bgMagenta")} ${e}`)},error:(e,r)=>{(r=`@nestjs:${r}`).length>20&&(e=(e=>{if(!e)return"";const t=e.split("\n"),r="dependencies of the ";if(t[0].includes(r)){let[o,i]=t[0].split(".");o=o.slice(o.indexOf(r)+r.length);const s=o.slice(0,o.indexOf(" "));o=o.slice(o.indexOf(" ")+1);const c=o.slice(1,-1).split(",").map((e=>e.trim())),l=i.match(new RegExp("in the ([^ ]+) context")),[,_]=i.match(new RegExp("the argument ([^ ]+) at")),p=n.default.red.bold(_),d=n.default.yellow("import"),u=n.default.yellow("from"),f=n.default.blueBright("{"),g=n.default.blueBright("}");let E=!1;const A=e.split("\n\n")[2],h=c.map((e=>!1===E?"?"===e?(E=!0,p):n.default.greenBright.bold(e):n.default.bold.yellow(e)));e=["",n.default.white.bold`Nest cannot resolve the dependencies of {bold.underline.magenta ${l[1]}}:{cyanBright.underline ${s}}`,"",n.default.magenta`@Injectable()`,`${n.default.yellow("export class")} ${s} ${f}`,n.default.gray`  ...`,`  ${n.default.yellow("constructor")} ${n.default.blueBright("(")}`,...h.map((e=>`    ${e},`)),n.default.blueBright(" ) {}"),n.default.gray` ...`,g,"",n.default.white.bold`Potential solutions:`,n.default.whiteBright` - If ${p} is a provider, is it part of the current {bold.magenta ${l[1]}}?`,n.default.whiteBright` - If ${p} is exported from a separate {bold.magenta @Module}, is that module imported within {bold.magenta ${l[1]}}?`,`${n.default.magenta("@Module")} ${n.default.blueBright("({")} `,`  ${n.default.white("imports")}: [ `,n.default.gray`    /* the {magenta.bold Module} containing ${p} */`,"  ] ",n.default.blueBright("})"),n.default.whiteBright` - Circular references`,n.default.gray` ...`,`  ${n.default.yellow("constructor")} ${n.default.blueBright("(")}`,...h.map((e=>e===p?`${n.default.magenta("@Inject")}${n.default.blueBright("(")}${n.default.yellow("forwardRef")}${n.default.blueBright("(()")} => ${p}${n.default.blueBright("))")} ${e}`:e)).map((e=>`    ${e},`)),n.default.blueBright(" ) {}"),n.default.gray` ...`,n.default.whiteBright` - Verify import statement follows these standards`,n.default.gray`// Good imports 👍`,...['"@another/library"','"./file"','"../directory"'].map((e=>`${d} ${f} ${p} ${g} ${u} ${n.default.green(e)};`)),n.default.gray`// Breaking imports 👎`,...['"."','".."','"../.."'].map((e=>`${d} ${f} ${p} ${g} ${u} ${n.default.red(e)};`)),n.default.gray`// Oops import 🤔`,`${n.default.yellow("import type")} ${f} ${p} ${g} ${n.default.yellow("from")} ....`,"","",n.default.white.bold`Stack Trace`,A.replaceAll((0,a.cwd)(),n.default.underline`workspace`)].join("\n")}return e})(r),r="@steggy:BootErrorMessage"),l.error(`${(0,t.highlightContext)(r,"bgRed")} ${e??"ERROR MESSAGE NOT PROVIDED"}`)},log:(e,r)=>{let o="debug",i="bgGreen";if("@nestjs:InstanceLoader"==(r=`@nestjs:${r}`)&&(e=(0,t.prettyFormatMessage)(e.split(" ").map(((e,t)=>0===t?`[${e}]`:e)).join(" "))),"@nestjs:RoutesResolver"===r){const r=e.split(" ");e=(0,t.prettyFormatMessage)([`[${r[0]}]`,r[1]].join(" ").slice(0,-1))}if("@nestjs:NestApplication"===r&&e.includes("started")&&(e=`🐣 ${e} 🐣`),"@nestjs:RouterExplorer"===r){const[r]=e.match(new RegExp("(\\{[^\\]]+\\})")),[n,s]=r.slice(1,-1).split(", ");e=(0,t.prettyFormatMessage)(` - [${s}] {${n}}`),o="debug",i="bgBlue.dim"}l[o](`${(0,t.highlightContext)(r,i)} ${e}`)},verbose:(e,r)=>{t.PrettyNestLogger.debug(e,r)},warn:(e,r)=>{l.warn(`${(0,t.highlightContext)(`@nestjs:${r}`,"bgYellow.dim")} ${e}`)}},t.UsePrettyLogger=function(){c.AutoLogService.logger=l,c.AutoLogService.prettyLogger=!0,c.AutoLogService.nestLogger=t.PrettyNestLogger,c.AutoLogService.logger=l,c.AutoLogService.call=function(e,r,...o){if("trace"===e&&"trace"!==c.AutoLogService.logger.level)return;const n=c.AutoLogService.getLogger();if(i.is.object(o[0])){const s=o.shift(),a=s.context,c=i.is.string(a)&&!i.is.empty(a)?a:r,l=`${(0,t.highlightContext)(c,t.methodColors.get(e))} ${(0,t.prettyFormatMessage)(o.shift())}`;n[e](s,l,...o)}else n[e](`${(0,t.highlightContext)(r,t.methodColors.get(e))} ${(0,t.prettyFormatMessage)(o.shift())}`,...o)}}},1355:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=r(752);r(3236),r(1964);const i=o.__importDefault(r(1635)),n=o.__importDefault(r(5334)),s=o.__importDefault(r(9912));o.__exportStar(r(1279),t),o.__exportStar(r(8266),t),o.__exportStar(r(4282),t),o.__exportStar(r(2786),t),o.__exportStar(r(6605),t),o.__exportStar(r(6540),t),i.default.extend(s.default),i.default.extend(n.default)},4868:(e,t,r)=>{var o,i;Object.defineProperty(t,"__esModule",{value:!0}),t.BoilerplateModule=void 0;const n=r(752),s=r(143),a=r(1279),c=r(4282),l=r(6443),_=r(2589),p=r(2786),d=r(6540);let u=o=class BoilerplateModule{discovery;static RegisterCache=p.RegisterCache;static forRoot(){const e=[...l.CONFIG_PROVIDERS.values()],t=[...c.LOGGER_PROVIDERS.values()];return{exports:[...e,...t,d.AutoLogService,d.AutoConfigService,d.CacheProviderService,d.FetchService,d.ModuleScannerService,d.WorkspaceService],global:!0,imports:[(0,p.RegisterCache)(),s.DiscoveryModule],module:o,providers:[...e,...t,d.AutoLogService,d.AutoConfigService,d.CacheProviderService,d.EventsExplorerService,d.FetchService,d.LifecycleService,d.LogExplorerService,d.ModuleScannerService,d.ScheduleExplorerService,d.WorkspaceService]}}constructor(e){this.discovery=e}configure(){this.discovery.load()}};u=o=n.__decorate([(0,_.LibraryModule)({configuration:{[a.CACHE_HOST]:{default:"localhost",description:"Configuration property for cache provider, does not apply to memory caching",type:"string"},[a.CACHE_PORT]:{default:6379,description:"Configuration property for cache provider, does not apply to memory caching",type:"number"},[a.CACHE_PREFIX]:{description:["Use a prefix with all cache keys","If blank, then application name is used"].join(". "),type:"string"},[a.CACHE_PROVIDER]:{default:"memory",description:"Redis is preferred if available",enum:["redis","memory"],type:"string"},[a.CACHE_TTL]:{default:86400,description:"Configuration property for cache provider",type:"number"},[a.CONFIG]:{description:["Consumable as CLI switch only","If provided, all other file based configurations will be ignored","Environment variables + CLI switches will operate normally"].join(". "),type:"string"},[a.LOG_LEVEL]:{default:"info",description:"Minimum log level to process",enum:["silent","info","warn","debug","error"],type:"string"},[a.SCAN_CONFIG]:{default:!1,description:"Find all application configurations and output as json",type:"boolean"}},exports:[d.AutoConfigService,d.AutoLogService,d.CacheProviderService,d.CacheService,d.FetchService,d.WorkspaceService],imports:[(0,p.RegisterCache)(),s.DiscoveryModule],library:a.LIB_BOILERPLATE,providers:[d.AutoConfigService,d.AutoLogService,d.CacheProviderService,d.CacheService,d.ConfigScanner,d.EventsExplorerService,d.FetchService,d.LifecycleService,d.LogExplorerService,d.ModuleScannerService,d.ScheduleExplorerService,d.WorkspaceService]}),n.__metadata("design:paramtypes",["function"==typeof(i=void 0!==d.LogExplorerService&&d.LogExplorerService)?i:Object])],u),t.BoilerplateModule=u},6605:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),r(752).__exportStar(r(4868),t)},5167:(e,t,r)=>{var o,i,n,s,a;Object.defineProperty(t,"__esModule",{value:!0}),t.AutoConfigService=void 0;const c=r(752),l=r(6481),_=r(143),p=r(1273),d=r(7147),u=r(8519),f=c.__importDefault(r(1566)),g=r(8665),E=r(1017),A=r(7282),h=r(1279),O=r(8266),S=r(4282),v=r(9154),y=r(930);let T=A.argv,C=o=class AutoConfigService{configDefaults;APPLICATION;logger;workspace;scanner;static setSwitches(e){T=e}constructor(e={},t,r,o,i,n){this.configDefaults=e,this.APPLICATION=t,this.logger=o,this.workspace=i,this.scanner=n,this.scanModules(),!0!==r&&this.earlyInit(),v.AutoLogService.logger.level=this.get([h.LIB_BOILERPLATE,h.LOG_LEVEL])}configDefinitions=new Map;configFiles;loadedConfigFiles;config={};loadedConfigPath;loadedProjects=new Set;switches;get appName(){return this.APPLICATION.description}get(e){Array.isArray(e)&&(e=e[p.LABEL].description===this.APPLICATION.description?["application",e[p.VALUE]].join("."):["libs",e[p.LABEL].description,e[p.VALUE]].join("."));const t=(0,g.get)(this.config,e),r=this.getConfiguration(e)?.default,o=t??r,i=this.getConfiguration(e);return this.cast(o,i?.type??"string")}getDefault(e){const t=(0,g.get)(this.configDefaults??{},e);if(!p.is.undefined(t))return t;const r=this.getConfiguration(e);return r||(this.logger.fatal({path:e},"Unknown configuration. Double check {project.json} assets + make sure property is included in metadata"),(0,A.exit)()),r.default}set(e,t,r=!1){Array.isArray(e)&&(e=["libs",e[p.LABEL].description,e[p.VALUE]].join(".")),(0,g.set)(this.config,e,t),r&&(0,d.writeFileSync)(this.loadedConfigPath,(0,u.encode)(this.config))}loadProject(e){this.loadedProjects.add(e)}onPreInit(){this.sanityCheckRequired()}cast(e,t){switch(t){case"boolean":return e??="",p.is.boolean(e)?e:["true","y","1"].includes(e.toLowerCase());case"number":return Number(e);case"string[]":return p.is.undefined(e)?[]:Array.isArray(e)?e.map(String):[String(e)]}return e}earlyInit(e=T){if(this.switches=(0,f.default)(e),this.config={},this.setDefaults(),(0,p.deepExtend)(this.config,this.configDefaults??{}),this.logger.setContext(h.LIB_BOILERPLATE,o),this.logger.context=[h.LIB_BOILERPLATE.description,o.name].join(":"),this.APPLICATION&&this.APPLICATION!==S.NO_APPLICATION){const[e,t]=this.workspace.loadMergedConfig(this.switches.config?[(0,E.resolve)(this.switches.config)]:this.workspace.configFilePaths(this.appName));this.configFiles=t,e.forEach(((e,t)=>{(0,p.deepExtend)(this.config,e),this.logger.debug(`Loaded configuration from {${t}}`)}))}else this.configFiles=[];this.loadFromEnv()}getConfiguration(e){const t=e.split(".");if(t.length===p.SINGLE&&t.unshift(this.appName),t.length===p.PAIR){const e=this.configDefinitions.get(this.appName)[t[p.VALUE]]??S.MESSY_INJECTED_CONFIGS.get(t[p.VALUE])??{type:"string"};return p.is.empty(Object.keys(e??{}))?{default:this.loadAppDefault(t[p.VALUE]),type:"string"}:e}const[,r,o]=t,i=this.configDefinitions.get(r);return i?i[o]:{type:"string"}}loadAppDefault(e){return A.env[e]??A.env[e.toLowerCase()]??this.switches[e]??this.switches[e.toLowerCase()]}loadFromEnv(){const e=Object.keys(A.env),t=Object.keys(this.switches);this.configDefinitions.forEach(((r,o)=>{const i=o?.replaceAll("-","_")||"unknown",n=this.APPLICATION?.description===o,s=n?"application":`libs_${i}`,a=n?"application":`libs.${o}`;Object.keys(r).forEach((r=>{const o=[`${s}_${r}`,r],i=`${a}.${r}`;if(o.find((e=>t.includes(e)))||o.find((e=>{const r=new RegExp(`^${e.replaceAll(new RegExp("[-_]","gi"),"[-_]?")}$`,"gi");return t.some((e=>e.match(r)))}))){const e=t.find((e=>o.some((t=>e.match(new RegExp(`^${t.replaceAll(new RegExp("[-_]","gi"),"[-_]?")}$`,"gi"))))));return void(0,g.set)(this.config,i,this.switches[e])}const n=o.find((t=>e.includes(t)))||o.find((t=>{const r=new RegExp(`^${t.replaceAll(new RegExp("[-_]","gi"),"[-_]?")}$`,"gi");return e.some((e=>e.match(r)))}));if(p.is.empty(n))return;const c=e.find((e=>o.some((t=>e.match(new RegExp(`^${t.replaceAll(new RegExp("[-_]","gi"),"[-_]?")}$`,"gi"))))));(0,g.set)(this.config,i,A.env[c])}))}))}sanityCheckRequired(){this.configDefinitions.forEach(((e,t)=>{e??={},Object.entries(e).forEach((([e,r])=>{const o=this.get([Symbol.for(t),e]);r.required&&p.is.undefined(o)&&(this.logger.fatal({...r},`Project [${t}] requires {${e}} to be provided`),(0,A.exit)())}))}))}scanModules(){[...this.scanner.getControllers(),...this.scanner.getProviders()].forEach((e=>{const t=e?.instance?.constructor;if(!t||p.is.undefined(t[O.MODULE_METADATA]))return;const{configuration:r={},providers:o=[]}=t[O.MODULE_METADATA],i=t[O.LOGGER_LIBRARY];o.forEach((e=>{(e[O.CONSUMES_CONFIG]??[]).forEach((([e,t])=>{if(t)return;const o=S.MESSY_INJECTED_CONFIGS.get(e);r[e]??=o}))})),this.configDefinitions.set(i,r)}))}setDefaults(){this.configDefinitions.forEach(((e,t)=>{const r=this.appName===t;Object.keys(e).forEach((o=>{if(!p.is.undefined(e[o].default)){let i=e[o].default;i=Array.isArray(i)?[...i]:p.is.object(i)?{...i}:i,(0,g.set)(this.config,`${r?"application":`libs.${t}`}.${o}`,i)}}))}))}};C=o=c.__decorate([(0,l.Injectable)(),c.__param(0,(0,l.Optional)()),c.__param(0,(0,l.Inject)(O.CONFIG_DEFAULTS)),c.__param(1,(0,l.Inject)(O.ACTIVE_APPLICATION)),c.__param(2,(0,l.Optional)()),c.__param(2,(0,l.Inject)(O.SKIP_CONFIG_INIT)),c.__metadata("design:paramtypes",["function"==typeof(i=void 0!==O.AbstractConfig&&O.AbstractConfig)?i:Object,Symbol,Boolean,"function"==typeof(n=void 0!==v.AutoLogService&&v.AutoLogService)?n:Object,"function"==typeof(s=void 0!==y.WorkspaceService&&y.WorkspaceService)?s:Object,"function"==typeof(a=void 0!==_.DiscoveryService&&_.DiscoveryService)?a:Object])],C),t.AutoConfigService=C},9154:(e,t,r)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),t.AutoLogService=t.NEST_NOOP_LOGGER=t.storage=void 0;const i=r(752),n=r(6481),s=r(143),a=r(1273),c=r(852),l=i.__importDefault(r(8545)),_=r(8266),p=r(4282);t.storage=new c.AsyncLocalStorage,t.NEST_NOOP_LOGGER={error:(...e)=>{console.error(...e)},log:()=>{},warn:()=>{}};const d=(0,l.default)();let u=o=class AutoLogService{parent;activeApplication;static logger=d;static nestLogger={debug:(e,t)=>o.logger.debug({context:`@nestjs:${t}`},e),error:(e,t)=>o.logger.error({context:`@nestjs:${t}`},e),log:(e,t)=>o.logger.info({context:`@nestjs:${t}`},e),verbose:(e,t)=>o.logger.debug({context:`@nestjs:${t}`},e),warn:(e,t)=>o.logger.warn({context:`@nestjs:${t}`},e)};static prettyLogger=!1;static call(e,t,...r){if("trace"===e&&"trace"!==o.logger.level)return;const i=this.getLogger(),n=a.is.object(r[0])?r.shift():{},s=a.is.string(r[0])?r.shift():"";i[e]({context:t,...n},s,...r)}static getLogger(){return t.storage.getStore()||o.logger}constructor(e,t){this.parent=e,this.activeApplication=t}#e;#t;contextId;get level(){return o.logger.level}get context(){if(!this.#e){this.#e??=this.getContext();const[e,t]=this.#e.split(":");e===this.activeApplication.description&&(this.#e=t)}return this.#e}set context(e){this.#t=e}debug(...e){o.call("debug",this.context,...e)}error(...e){o.call("error",this.context,...e)}fatal(...e){o.call("fatal",this.context,...e)}info(...e){o.call("info",this.context,...e)}setContext(e,t){this.#t=`${e.description}:${t.name}`}trace(...e){o.call("trace",this.context,...e)}warn(...e){o.call("warn",this.context,...e)}getContext(){return this.#t?this.#t:this.contextId?p.mappedContexts.get(this.contextId):(0,_.GetLogContext)(this.parent)??_.MISSING_CONTEXT}};u=o=i.__decorate([(0,n.Injectable)({scope:n.Scope.TRANSIENT}),i.__param(0,(0,n.Inject)(s.INQUIRER)),i.__param(1,(0,n.Inject)(_.ACTIVE_APPLICATION)),i.__metadata("design:paramtypes",[Object,Symbol])],u),t.AutoLogService=u},1023:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CacheProviderService=void 0;const o=r(752),i=r(6481),n=o.__importDefault(r(5768)),s=r(1279),a=r(6443);let c=class CacheProviderService{cacheProvider;host;port;defaultTtl;constructor(e,t,r,o){this.cacheProvider=e,this.host=t,this.port=r,this.defaultTtl=o}getConfig(){const e=this.defaultTtl;return"memory"===this.cacheProvider?{isGlobal:!0,ttl:e}:{host:this.host,isGlobal:!0,port:this.port,store:n.default,ttl:e}}};c=o.__decorate([(0,i.Injectable)(),o.__param(0,(0,a.InjectConfig)(s.CACHE_PROVIDER)),o.__param(1,(0,a.InjectConfig)(s.CACHE_HOST)),o.__param(2,(0,a.InjectConfig)(s.CACHE_PORT)),o.__param(3,(0,a.InjectConfig)(s.CACHE_TTL)),o.__metadata("design:paramtypes",[String,String,Number,Number])],c),t.CacheProviderService=c},6483:(e,t,r)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),t.CacheService=void 0;const i=r(752),n=r(6481),s=r(3312),a=r(1279),c=r(8266),l=r(6443);let _=class CacheService{cache;activeApplication;prefix;constructor(e,t,r){this.cache=e,this.activeApplication=t,this.prefix=r,this.prefix||=t.description}async del(e){e=`${this.prefix}${e}`,await this.cache.del(e)}async get(e,t){return e=`${this.prefix}${e}`,await this.cache.get(e)??t}async keys(e="*"){return e=`${this.prefix}${e}`,await this.cache.store.keys(e)}async set(e,t,r){e=`${this.prefix}${e}`,await this.cache.set(e,t,r)}};_=i.__decorate([(0,n.Injectable)(),i.__param(0,(0,n.Inject)(n.CACHE_MANAGER)),i.__param(1,(0,n.Inject)(c.ACTIVE_APPLICATION)),i.__param(2,(0,l.InjectConfig)(a.CACHE_PREFIX)),i.__metadata("design:paramtypes",["function"==typeof(o=void 0!==s.Cache&&s.Cache)?o:Object,Symbol,String])],_),t.CacheService=_},2202:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigScanner=void 0;const o=r(752),i=r(6481),n=r(7282),s=r(1279),a=r(6443),c=r(2786);let l=class ConfigScanner{scanConfig;constructor(e){this.scanConfig=e}onRewire(e,t){this.scanConfig&&this.scanConfig&&(console.log(JSON.stringify((0,c.ScanConfig)(e,t?.config))),(0,n.exit)())}};l=o.__decorate([(0,i.Injectable)(),o.__param(0,(0,a.InjectConfig)(s.SCAN_CONFIG)),o.__metadata("design:paramtypes",[Boolean])],l),t.ConfigScanner=l},113:(e,t,r)=>{var o,i,n,s,a;Object.defineProperty(t,"__esModule",{value:!0}),t.EventsExplorerService=void 0;const c=r(752),l=r(6481),_=r(143),p=r(1273),d=c.__importDefault(r(5502)),u=r(9830),f=r(8266),g=r(4762),E=r(9154);let A=class EventsExplorerService{discovery;eventEmitter;logger;metadataScanner;reflector;constructor(e,t,r,o,i){this.discovery=e,this.eventEmitter=t,this.logger=r,this.metadataScanner=o,this.reflector=i}getEventHandlerMetadata(e){return this.reflector.get(g.EVENT_LISTENER_METADATA,e)}loadEventListeners(){[...this.discovery.getProviders(),...this.discovery.getControllers()].filter((e=>e.isDependencyTreeStatic())).filter((e=>e.instance)).forEach((e=>{const{instance:t}=e,r=Object.getPrototypeOf(t);r&&!(0,u.isProxy)(t)&&this.metadataScanner.scanFromPrototype(t,r,(e=>{this.subscribe(t,e)}))}))}onApplicationBootstrap(){this.loadEventListeners()}onApplicationShutdown(){this.eventEmitter.removeAllListeners()}subscribe(e,t){const r=this.getEventHandlerMetadata(e[t]);if(!r)return;const{event:o}=r,i=(0,f.GetLogContext)(e),n=Array.isArray(o)?o:[o];this.logger.debug(`${i}#${t} event subscribe ${n.map((e=>`{${p.is.string(e)?e:e.description}}`)).join(", ")}`),(Array.isArray(o)?o:[o]).forEach((r=>this.eventEmitter.on(r,((...r)=>e[t].call(e,...r)))))}};A=c.__decorate([(0,l.Injectable)(),c.__metadata("design:paramtypes",["function"==typeof(o=void 0!==_.DiscoveryService&&_.DiscoveryService)?o:Object,"function"==typeof(i=void 0!==d.default&&d.default)?i:Object,"function"==typeof(n=void 0!==E.AutoLogService&&E.AutoLogService)?n:Object,"function"==typeof(s=void 0!==_.MetadataScanner&&_.MetadataScanner)?s:Object,"function"==typeof(a=void 0!==_.Reflector&&_.Reflector)?a:Object])],A),t.EventsExplorerService=A},7502:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=r(752);o.__exportStar(r(113),t),o.__exportStar(r(2620),t),o.__exportStar(r(1503),t),o.__exportStar(r(758),t)},2620:(e,t,r)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),t.LogExplorerService=void 0;const i=r(752),n=r(6481),s=r(143),a=r(1273),c=r(1279),l=r(8266),_=r(4282),p=r(6443),d=new Set(["ModuleRef","","useFactory"]);let u=class LogExplorerService{discovery;logLevel;constructor(e,t){this.discovery=e,this.logLevel=t}load(){[...this.discovery.getControllers(),...this.discovery.getProviders()].filter((({instance:e})=>!!e)).forEach((e=>{const{instance:t,host:r}=e,o=t.constructor;if(!o||!o[l.LOGGER_LIBRARY])return;const i=o[l.LOGGER_LIBRARY];[...r.providers.values(),...r.controllers.values()].forEach((({metatype:e})=>{if(d.has(e?.name??"")||!a.is.undefined(e[l.LOG_CONTEXT]))return;const t=`${i}:${e.name}`;_.mappedContexts.forEach(((r,o)=>{r===e.name&&_.mappedContexts.set(o,t)})),e[l.LOG_CONTEXT]??=t,e[l.LOGGER_LIBRARY]??=i}))}))}};u=i.__decorate([(0,n.Injectable)(),i.__param(1,(0,p.InjectConfig)(c.LOG_LEVEL)),i.__metadata("design:paramtypes",["function"==typeof(o=void 0!==s.DiscoveryService&&s.DiscoveryService)?o:Object,String])],u),t.LogExplorerService=u},1503:(e,t,r)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleScannerService=void 0;const i=r(752),n=r(6481),s=r(143),a=r(1273),c=r(8266);let l=class ModuleScannerService{discovery;constructor(e){this.discovery=e}applicationProviders(){return this.getProviders().filter((e=>{const t=e.constructor;return t&&!a.is.undefined(t[c.LOGGER_LIBRARY])}))}findWithSymbol(e){const t=new Map;return this.applicationProviders().forEach((r=>{const o=r.constructor;o&&(a.is.undefined(o[e])||t.set(r,o[e]))})),t}getProviders(){return[...this.discovery.getControllers(),...this.discovery.getProviders()].filter((e=>!!e.instance)).map((e=>e.instance))}};l=i.__decorate([(0,n.Injectable)(),i.__metadata("design:paramtypes",["function"==typeof(o=void 0!==s.DiscoveryService&&s.DiscoveryService)?o:Object])],l),t.ModuleScannerService=l},758:(e,t,r)=>{var o,i,n,s;Object.defineProperty(t,"__esModule",{value:!0}),t.ScheduleExplorerService=void 0;const a=r(752),c=r(6481),l=r(143),_=r(7024),p=r(1273),d=r(6857),u=r(9830),f=r(8266),g=r(9154);let E=class ScheduleExplorerService{logger;discovery;metadataScanner;reflector;constructor(e,t,r,o){this.logger=e,this.discovery=t,this.metadataScanner=r,this.reflector=o}onApplicationBootstrap(){[...this.discovery.getControllers(),...this.discovery.getProviders()].forEach((e=>{const{instance:t}=e;t&&Object.getPrototypeOf(t)&&!(0,u.isProxy)(t)&&this.metadataScanner.scanFromPrototype(t,Object.getPrototypeOf(t),(e=>{const r=this.reflector.get(p.CRON_SCHEDULE,t[e]);r&&(this.logger.debug(`${(0,f.GetLogContext)(t)}#${e} cron {${r}}`),new d.CronJob(r,(()=>t[e]())).start())}))}))}};E=a.__decorate([(0,c.Injectable)(),a.__metadata("design:paramtypes",["function"==typeof(o=void 0!==g.AutoLogService&&g.AutoLogService)?o:Object,"function"==typeof(i=void 0!==l.DiscoveryService&&l.DiscoveryService)?i:Object,"function"==typeof(n=void 0!==_.MetadataScanner&&_.MetadataScanner)?n:Object,"function"==typeof(s=void 0!==l.Reflector&&l.Reflector)?s:Object])],E),t.ScheduleExplorerService=E},5564:(e,t,r)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),t.FetchService=void 0;const i=r(752),n=r(6481),s=r(1273),a=i.__importDefault(r(1055)),c=r(7147),l=i.__importDefault(r(4809)),_=r(2368),p=r(9154);let d=class FetchService{logger;constructor(e){this.logger=e}BASE_URL;TRUNCATE_LENGTH=200;limiter;bottleneck(e){this.limiter=new a.default(e),this.limiter.on("error",(e=>{this.logger.error({...e},"Error caught in limiter")}))}async download({destination:e,...t}){const r=await this.fetchCreateUrl(t),o=await this.fetchCreateMeta(t),i=await(0,l.default)(r,o);await new Promise(((t,r)=>{const o=(0,c.createWriteStream)(e);i.body.pipe(o),i.body.on("error",(e=>r(e))),o.on("finish",(()=>t()))}))}async fetch(e){return this.limiter?this.limiter.schedule((async()=>await this.immediateFetch(e))):await this.immediateFetch(e)}fetchCreateUrl({rawUrl:e,url:t,...r}){let o=e?t:`${r.baseUrl??this.BASE_URL}${t}`;return r.params&&(o=`${o}?${this.buildFilterString(r)}`),o}buildFilterString(e){return new URLSearchParams({...Object.fromEntries(Object.entries(e.params??{}).map((([e,t])=>[e,this.cast(t)])))}).toString()}fetchCreateMeta({body:e,...t}){const r={...t.headers};let o=t.method??"get";return e&&(o="get"===t.method?"post":t.method,r["Content-Type"]="application/json"),s.is.object(e)&&(e=JSON.stringify(e)),{body:e,headers:r,method:o}}async fetchHandleResponse({process:e},t){if(!1===e)return t;const r=await t.text();if("text"===e)return r;if(!["{","["].includes(r.charAt(s.FIRST)))return["OK"].includes(r)?this.logger.debug({text:r},"Full response text"):this.logger.warn({text:r},"Unexpected API Response"),r;const o=JSON.parse(r);return this.checkForHttpErrors(o)}async immediateFetch(e){const t=await this.fetchCreateUrl(e),r=await this.fetchCreateMeta(e);try{const o=await(0,l.default)(t,r);return!1===e.process?o:await this.fetchHandleResponse(e,o)}catch(e){return void this.logger.error({error:e})}}cast(e){return Array.isArray(e)?e.map((e=>this.cast(e))).join(","):e instanceof Date?e.toISOString():s.is.number(e)?e.toString():s.is.boolean(e)?e?"true":"false":e}checkForHttpErrors(e){return s.is.object(e)&&null!==e?(s.is.number(e.statusCode)&&s.is.string(e.error)&&this.logger.error({error:e},e.message),e):e}};d=i.__decorate([(0,n.Injectable)({scope:n.Scope.TRANSIENT}),i.__param(0,(0,_.TransientLogger)()),i.__metadata("design:paramtypes",["function"==typeof(o=void 0!==p.AutoLogService&&p.AutoLogService)?o:Object])],d),t.FetchService=d},6540:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=r(752);o.__exportStar(r(5167),t),o.__exportStar(r(9154),t),o.__exportStar(r(6483),t),o.__exportStar(r(1023),t),o.__exportStar(r(2202),t),o.__exportStar(r(7502),t),o.__exportStar(r(5564),t),o.__exportStar(r(8024),t),o.__exportStar(r(930),t)},8024:(e,t,r)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),t.LifecycleService=void 0;const i=r(752),n=r(6481),s=r(1273),a=r(1503);let c=class LifecycleService{scanner;constructor(e){this.scanner=e}async postInit(e,{server:t,options:r}){const o=[];this.scanner.applicationProviders().forEach((e=>{e.onPostInit&&o.push(e)})),await(0,s.eachSeries)(o,(async o=>{await o.onPostInit(e,t,r)}))}async preInit(e,{server:t,options:r}){const o=[];this.scanner.applicationProviders().forEach((e=>{(e.onPreInit||e.onRewire)&&o.push(e)})),await(0,s.eachSeries)(o,(async t=>{t.onRewire&&await t.onRewire(e,r)})),await(0,s.eachSeries)(o,(async o=>{o.onPostInit&&await o.onPreInit(e,t,r)}))}};c=i.__decorate([(0,n.Injectable)(),i.__metadata("design:paramtypes",["function"==typeof(o=void 0!==a.ModuleScannerService&&a.ModuleScannerService)?o:Object])],c),t.LifecycleService=c},930:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceService=void 0;const o=r(752),i=r(6481),n=r(1273),s=o.__importDefault(r(1327)),a=r(7147),c=r(8519),l=r(9793),_=r(2037),p=r(1017),d=r(7282),u=r(8673),f=["json","ini","yaml","yml"];let g=class WorkspaceService{application;constructor(e){this.application=e}isWindows="win32"===d.platform;configFilePaths(e=this.application.description){const t=[];this.isWindows||t.push(...this.withExtensions((0,p.join)("/etc",e,"config")),...this.withExtensions((0,p.join)("/etc",`${e}rc`)));let r,o=(0,d.cwd)();for(;!n.is.empty(o)&&(t.push((0,p.join)(o,`.${e}rc`)),r=(0,p.join)(o,".."),r!==o);)o=r;return t.push(...this.withExtensions((0,p.join)((0,_.homedir)(),".config",e)),...this.withExtensions((0,p.join)((0,_.homedir)(),".config",e,"config"))),t}isApplication(e){return this.application.description===e}isProject(e){return this.application.description!==e}loadConfigFromFile(e,t){if(!(0,a.existsSync)(t))return e;const r=(0,a.readFileSync)(t,"utf8").trim();if(!f.some((o=>{if(t.slice(o.length*n.INVERT_VALUE).toLowerCase()===o)switch(o){case"ini":return e.set(t,(0,c.decode)(r)),!0;case"yaml":case"yml":return e.set(t,(0,l.load)(r)),!0;case"json":return e.set(t,s.default.parse(r)),!0}return!1}))){if("{"===r[n.START])return e.set(t,s.default.parse(r)),!0;try{const o=(0,l.load)(r);if(n.is.object(o))return e.set(t,o),!0}catch{}return e.set(t,(0,c.decode)(r)),!0}}loadMergedConfig(e=[]){const t=new Map,r=[];return e.forEach((e=>{this.loadConfigFromFile(t,e),r.push(e)})),[t,r]}withExtensions(e){return[e,...f.map((t=>`${e}.${t}`))]}};g=o.__decorate([(0,i.Injectable)(),o.__param(0,(0,i.Inject)(u.ACTIVE_APPLICATION)),o.__metadata("design:paramtypes",[Symbol])],g),t.WorkspaceService=g},4896:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.eachSeries=t.each=void 0;const o=r(1003);t.each=async function(e=[],t){await Promise.all(e.map((async e=>await t(e))))},t.eachSeries=async function(e,t){if(e instanceof Set&&(e=[...e.values()]),!Array.isArray(e))throw new TypeError("Not provided an array");for(let r=o.START;r<=e.length-o.ARRAY_OFFSET;r++)await t(e[r])}},9427:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.INTERVAL_SCHEDULE=t.CRON_SCHEDULE=t.CronExpression=void 0,(r=t.CronExpression||(t.CronExpression={})).EVERY_SECOND="* * * * * *",r.EVERY_5_SECONDS="*/5 * * * * *",r.EVERY_10_SECONDS="*/10 * * * * *",r.EVERY_30_SECONDS="*/30 * * * * *",r.EVERY_MINUTE="*/1 * * * *",r.EVERY_5_MINUTES="0 */5 * * * *",r.EVERY_10_MINUTES="0 */10 * * * *",r.EVERY_30_MINUTES="0 */30 * * * *",r.EVERY_HOUR="0 0-23/1 * * *",r.EVERY_2_HOURS="0 0-23/2 * * *",r.EVERY_3_HOURS="0 0-23/3 * * *",r.EVERY_4_HOURS="0 0-23/4 * * *",r.EVERY_5_HOURS="0 0-23/5 * * *",r.EVERY_6_HOURS="0 0-23/6 * * *",r.EVERY_7_HOURS="0 0-23/7 * * *",r.EVERY_8_HOURS="0 0-23/8 * * *",r.EVERY_9_HOURS="0 0-23/9 * * *",r.EVERY_10_HOURS="0 0-23/10 * * *",r.EVERY_11_HOURS="0 0-23/11 * * *",r.EVERY_12_HOURS="0 0-23/12 * * *",r.EVERY_DAY_AT_1AM="0 01 * * *",r.EVERY_DAY_AT_2AM="0 02 * * *",r.EVERY_DAY_AT_3AM="0 03 * * *",r.EVERY_DAY_AT_4AM="0 04 * * *",r.EVERY_DAY_AT_5AM="0 05 * * *",r.EVERY_DAY_AT_6AM="0 06 * * *",r.EVERY_DAY_AT_7AM="0 07 * * *",r.EVERY_DAY_AT_8AM="0 08 * * *",r.EVERY_DAY_AT_9AM="0 09 * * *",r.EVERY_DAY_AT_10AM="0 10 * * *",r.EVERY_DAY_AT_11AM="0 11 * * *",r.EVERY_DAY_AT_NOON="0 12 * * *",r.EVERY_DAY_AT_1PM="0 13 * * *",r.EVERY_DAY_AT_2PM="0 14 * * *",r.EVERY_DAY_AT_3PM="0 15 * * *",r.EVERY_DAY_AT_4PM="0 16 * * *",r.EVERY_DAY_AT_5PM="0 17 * * *",r.EVERY_DAY_AT_6PM="0 18 * * *",r.EVERY_DAY_AT_7PM="0 19 * * *",r.EVERY_DAY_AT_8PM="0 20 * * *",r.EVERY_DAY_AT_9PM="0 21 * * *",r.EVERY_DAY_AT_10PM="0 22 * * *",r.EVERY_DAY_AT_11PM="0 23 * * *",r.EVERY_DAY_AT_MIDNIGHT="0 0 * * *",r.EVERY_WEEK="0 0 * * 0",r.EVERY_WEEKDAY="0 0 * * 1-5",r.EVERY_WEEKEND="0 0 * * 6,0",r.EVERY_1ST_DAY_OF_MONTH_AT_MIDNIGHT="0 0 1 * *",r.EVERY_1ST_DAY_OF_MONTH_AT_NOON="0 12 1 * *",r.EVERY_2ND_HOUR="0 */2 * * *",r.EVERY_2ND_HOUR_FROM_1AM_THROUGH_11PM="0 1-23/2 * * *",r.EVERY_2ND_MONTH="0 0 1 */2 *",r.EVERY_QUARTER="0 0 1 */3 *",r.EVERY_6_MONTHS="0 0 1 */6 *",r.EVERY_YEAR="0 0 1 1 *",r.EVERY_30_MINUTES_BETWEEN_9AM_AND_5PM="0 */30 9-17 * * *",r.EVERY_30_MINUTES_BETWEEN_9AM_AND_6PM="0 */30 9-18 * * *",r.EVERY_30_MINUTES_BETWEEN_10AM_AND_7PM="0 */30 10-19 * * *",r.MONDAY_TO_FRIDAY_AT_1AM="0 0 01 * * 1-5",r.MONDAY_TO_FRIDAY_AT_2AM="0 0 02 * * 1-5",r.MONDAY_TO_FRIDAY_AT_3AM="0 0 03 * * 1-5",r.MONDAY_TO_FRIDAY_AT_4AM="0 0 04 * * 1-5",r.MONDAY_TO_FRIDAY_AT_5AM="0 0 05 * * 1-5",r.MONDAY_TO_FRIDAY_AT_6AM="0 0 06 * * 1-5",r.MONDAY_TO_FRIDAY_AT_7AM="0 0 07 * * 1-5",r.MONDAY_TO_FRIDAY_AT_8AM="0 0 08 * * 1-5",r.MONDAY_TO_FRIDAY_AT_9AM="0 0 09 * * 1-5",r.MONDAY_TO_FRIDAY_AT_09_30AM="0 30 09 * * 1-5",r.MONDAY_TO_FRIDAY_AT_10AM="0 0 10 * * 1-5",r.MONDAY_TO_FRIDAY_AT_11AM="0 0 11 * * 1-5",r.MONDAY_TO_FRIDAY_AT_11_30AM="0 30 11 * * 1-5",r.MONDAY_TO_FRIDAY_AT_12PM="0 0 12 * * 1-5",r.MONDAY_TO_FRIDAY_AT_1PM="0 0 13 * * 1-5",r.MONDAY_TO_FRIDAY_AT_2PM="0 0 14 * * 1-5",r.MONDAY_TO_FRIDAY_AT_3PM="0 0 15 * * 1-5",r.MONDAY_TO_FRIDAY_AT_4PM="0 0 16 * * 1-5",r.MONDAY_TO_FRIDAY_AT_5PM="0 0 17 * * 1-5",r.MONDAY_TO_FRIDAY_AT_6PM="0 0 18 * * 1-5",r.MONDAY_TO_FRIDAY_AT_7PM="0 0 19 * * 1-5",r.MONDAY_TO_FRIDAY_AT_8PM="0 0 20 * * 1-5",r.MONDAY_TO_FRIDAY_AT_9PM="0 0 21 * * 1-5",r.MONDAY_TO_FRIDAY_AT_10PM="0 0 22 * * 1-5",r.MONDAY_TO_FRIDAY_AT_11PM="0 0 23 * * 1-5",t.CRON_SCHEDULE=Symbol("CRON_SCHEDULE"),t.INTERVAL_SCHEDULE=Symbol("INTERVAL_SCHEDULE")},1886:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deepExtend=t.deepCloneArray=void 0;const o=r(9810);function i(e){return e instanceof Buffer||e instanceof Date||e instanceof RegExp}function n(e){if(e instanceof Buffer){const t=Buffer.alloc(e.length);return e.copy(t),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e);throw new TypeError("Unexpected situation")}function s(e){return e.map((e=>o.is.object(e)?Array.isArray(e)?s(e):i(e)?n(e):c({},e):e))}function a(e,t){return"__proto__"===t?void 0:e[t]}function c(e,t){return"object"!=typeof t||null===t||Array.isArray(t)||Object.keys(t).forEach((r=>{const o=a(e,r),l=a(t,r);l!==e&&("object"==typeof l&&null!==l?Array.isArray(l)?e[r]=s(l):i(l)?e[r]=n(l):"object"!=typeof o||null===o||Array.isArray(o)?e[r]=c({},l):e[r]=c(o,l):e[r]=l)})),e}t.deepCloneArray=s,t.deepExtend=c},1273:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=r(752);o.__exportStar(r(4896),t),o.__exportStar(r(9427),t),o.__exportStar(r(1886),t),o.__exportStar(r(9810),t),o.__exportStar(r(1925),t),o.__exportStar(r(596),t),o.__exportStar(r(1003),t)},9810:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.is=void 0;const o=r(1003);class is{static boolean(e){return"boolean"==typeof e}static date(e){return e instanceof Date}static empty(e){return is.string(e)||Array.isArray(e)?e.length===o.EMPTY:e instanceof Map||e instanceof Set?e.size===o.EMPTY:!is.object(e)||Object.keys(e).length===o.EMPTY}static even(e){return e%o.EVEN===o.EMPTY}static function(e){return"function"==typeof e}static hash(e){let t=o.START;for(let r=o.START;r<e.length;r++)t=(t<<5)-t+e.codePointAt(r),t=Math.trunc(t);return t.toString()}static number(e){return"number"==typeof e&&!Number.isNaN(e)}static object(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}static random(e){return e[Math.floor(Math.random()*e.length)]}static string(e){return"string"==typeof e}static symbol(e){return"symbol"==typeof e}static undefined(e){return void 0===e}static unique(e){return e.filter(((e,t,r)=>r.indexOf(e)===t))}}t.is=is},1925:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.queryToControl=t.buildFilter=t.controlToQuery=t.ResultControlDTO=t.FilterDTO=t.ComparisonDTO=t.FILTER_OPERATIONS=t.HTTP_METHODS=void 0;const o=r(9810);var i,n;(n=t.HTTP_METHODS||(t.HTTP_METHODS={})).get="get",n.delete="delete",n.put="put",n.head="head",n.options="options",n.patch="patch",n.index="index",n.post="post",function(e){e.elem="elem",e.regex="regex",e.in="in",e.nin="nin",e.lt="lt",e.lte="lte",e.gt="gt",e.gte="gte",e.exists="exists",e.empty="empty",e.ne="ne",e.eq="eq"}(i=t.FILTER_OPERATIONS||(t.FILTER_OPERATIONS={}));class ComparisonDTO{operation;value}t.ComparisonDTO=ComparisonDTO,t.FilterDTO=class FilterDTO extends ComparisonDTO{empty;exists;field},t.ResultControlDTO=class ResultControlDTO{filters;limit;select;skip;sort},t.controlToQuery=function(e){const t=new Map;return e?.limit&&t.set("limit",e.limit.toString()),e?.skip&&t.set("skip",e.skip.toString()),e?.sort&&t.set("sort",e.sort.join(",")),e?.select&&t.set("select",e.select.join(",")),e?.filters?.forEach((e=>{let r=e.field;e.operation&&e.operation!==i.eq&&(r=`${r}__${e.operation}`);let o=e.value;Array.isArray(o)&&(o=o.join(",")),o instanceof Date&&(o=o.toISOString()),null===o&&(o="null"),t.set(r,(o??"").toString())})),Object.fromEntries(t.entries())},t.buildFilter=function(e,t){const[r,i]=e.split("__");switch(i){case"in":case"nin":return Array.isArray(t)||(t=o.is.string(t)?t.split(","):[t]),{field:r,operation:i,value:t};case"elem":return{field:r,operation:i,value:o.is.string(t)?JSON.parse(t):t};default:return{field:r,operation:i,value:t}}},t.queryToControl=function(e){const t={filters:new Set};return new Map(Object.entries(e)).forEach(((e,r)=>{const[o,i]=r.split("__");switch(r){case"select":return void(t.select=e.split(","));case"sort":return void(t.sort=e.split(","));case"limit":return void(t.limit=Number(e));case"skip":return void(t.skip=Number(e))}switch(i){case"in":case"nin":return void t.filters.add({field:o,operation:i,value:e.split(",")});case"elem":return void t.filters.add({field:o,operation:i,value:JSON.parse(e)});default:t.filters.add({field:o,operation:i,value:e})}})),t}},596:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TitleCase=void 0,t.TitleCase=function(e){const t=e.match(new RegExp("[a-z][A-Z]","g"));return t&&t.forEach((t=>e=e.replace(t,[...t].join(" ")))),e.split(new RegExp("[ _-]")).map(((e="")=>`${e.charAt(0).toUpperCase()}${e.slice(1)}`)).join(" ")}},1003:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PEAT=t.sleep=t.PERCENT=t.SECOND=t.DAY=t.HOUR=t.MINUTE=t.DOWN=t.NOT_FOUND=t.NO_CHANGE=t.EMPTY=t.FIRST=t.NONE=t.START=t.LABEL=t.SAME=t.SINGLE=t.INCREMENT=t.ARRAY_OFFSET=t.VALUE=t.UP=t.INVERT_VALUE=t.DEFAULT_LIMIT=t.TWO_THIRDS=t.HALF=t.PAIR=t.EVEN=void 0,t.EVEN=2,t.PAIR=2,t.HALF=.5,t.TWO_THIRDS=2/3,t.DEFAULT_LIMIT=5,t.INVERT_VALUE=-1,t.UP=1,t.VALUE=1,t.ARRAY_OFFSET=1,t.INCREMENT=1,t.SINGLE=1,t.SAME=0,t.LABEL=0,t.START=0,t.NONE=0,t.FIRST=0,t.EMPTY=0,t.NO_CHANGE=0,t.NOT_FOUND=-1,t.DOWN=-1,t.MINUTE=6e4,t.HOUR=36e5,t.DAY=864e5,t.SECOND=1e3,t.PERCENT=100,t.sleep=function(e=t.SECOND){let r;const o=setTimeout((()=>r()),e),i=new Promise((e=>r=e));return i.kill=(e="stop")=>{"continue"===e&&r(),clearTimeout(o),r=void 0},i},t.PEAT=function(e,r){return Array.from({length:e}).map(((e,o)=>r??o+t.ARRAY_OFFSET))}},6481:e=>{e.exports=require("@nestjs/common")},143:e=>{e.exports=require("@nestjs/core")},7024:e=>{e.exports=require("@nestjs/core/metadata-scanner")},6188:e=>{e.exports=require("@nestjs/platform-express")},1055:e=>{e.exports=require("bottleneck")},3312:e=>{e.exports=require("cache-manager")},5768:e=>{e.exports=require("cache-manager-redis-store")},5022:e=>{e.exports=require("chalk")},1327:e=>{e.exports=require("comment-json")},6857:e=>{e.exports=require("cron")},1635:e=>{e.exports=require("dayjs")},5334:e=>{e.exports=require("dayjs/plugin/advancedFormat")},9912:e=>{e.exports=require("dayjs/plugin/weekOfYear")},5502:e=>{e.exports=require("eventemitter3")},6860:e=>{e.exports=require("express")},8519:e=>{e.exports=require("ini")},9793:e=>{e.exports=require("js-yaml")},1566:e=>{e.exports=require("minimist")},4809:e=>{e.exports=require("node-fetch")},8665:e=>{e.exports=require("object-path")},8545:e=>{e.exports=require("pino")},3009:e=>{e.exports=require("pino-pretty")},3236:e=>{e.exports=require("reflect-metadata")},1964:e=>{e.exports=require("rxjs")},912:e=>{e.exports=require("semver")},752:e=>{e.exports=require("tslib")},5828:e=>{e.exports=require("uuid")},852:e=>{e.exports=require("async_hooks")},7147:e=>{e.exports=require("fs")},2037:e=>{e.exports=require("os")},1017:e=>{e.exports=require("path")},7282:e=>{e.exports=require("process")},9830:e=>{e.exports=require("util/types")}},t={};function r(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}var o={};(()=>{var e=o;Object.defineProperty(e,"__esModule",{value:!0}),e.BuildPipelineService=void 0;const t=r(752),i=r(1355),n=t.__importDefault(r(1327)),s=t.__importDefault(r(1635)),a=r(7147),c=r(1017),l=r(912);let _=class BuildPipelineService{exec(){const e=n.default.parse((0,a.readFileSync)("package.json","utf8")),t=(0,s.default)().format("YY.ww").replace(".0",".");e.version=e.version.startsWith(t)?(0,l.inc)(e.version,"patch"):`${t}.0`,(0,a.writeFileSync)("package.json",n.default.stringify(e,void 0,"  ")+"\n");const r=n.default.parse((0,a.readFileSync)("workspace.json","utf8"));Object.values(r.projects).forEach((t=>{const r=n.default.parse((0,a.readFileSync)((0,c.join)(t,"package.json"),"utf8"));r.version=e.version,(0,a.writeFileSync)((0,c.join)(t,"package.json"),n.default.stringify(r,void 0,"  ")+"\n")}))}};_=t.__decorate([(0,i.QuickScript)()],_),e.BuildPipelineService=_})();var i=exports;for(var n in o)i[n]=o[n];o.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();
